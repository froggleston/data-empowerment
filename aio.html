<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Data Empowerment for Election Workers: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/edi-plej/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/edi-plej/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/edi-plej/favicon-16x16.png">
<link rel="manifest" href="favicons/edi-plej/site.webmanifest">
<link rel="mask-icon" href="favicons/edi-plej/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav edi-plej"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="edi-plej-logo" alt="Engineering For Democracy Institute and Partnership for Large Election Jurisdictions" src="assets/images/edi-plej-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav edi-plej" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Engineering For Democracy Institute and Partnership for Large Election Jurisdictions" src="assets/images/edi-plej-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Data Empowerment for Election Workers
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Data Empowerment for Election Workers
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html"></a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Empowerment for Election Workers
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress edi-plej">
    <div class="progress-bar edi-plej" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-intro.html">1. Before we Start</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-intro-to-r.html">2. Introduction to R</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Starting with Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-dplyr.html">4. Data Wrangling with dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-tidyr.html">5. Data Wrangling with tidyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html"></a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-00-intro"><p>Content from <a href="00-intro.html">Before we Start</a></p>
<hr>
<p>Last updated on 2025-11-14 |

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/episodes/00-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to find your way around RStudio?</li>
<li>How to interact with R?</li>
<li>How to manage your environment?</li>
<li>How to install packages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Install latest version of R.</li>
<li>Install latest version of RStudio.</li>
<li>Navigate the RStudio GUI.</li>
<li>Install additional packages using the packages tab.</li>
<li>Install additional packages using R code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-r-what-is-rstudio">What is R? What is RStudio?<a class="anchor" aria-label="anchor" href="#what-is-r-what-is-rstudio"></a>
</h2>
<hr class="half-width">
<p>The term “<code>R</code>” is used to refer to both the programming
language and the software that interprets the scripts written using
it.</p>
<p><a href="https://rstudio.com" class="external-link">RStudio</a> is currently a very popular
way to not only write your R scripts but also to interact with the R
software. To function correctly, RStudio needs R and therefore both need
to be installed on your computer.</p>
<p>To make it easier to interact with R, we will use RStudio. RStudio is
the most popular IDE (Integrated Development Environment) for R. An IDE
is a piece of software that provides tools to make programming
easier.</p>
<p>You can also use the R Presentations feature to present your work in
an HTML5 presentation mixing Markdown and R code. You can display these
within R Studio or your browser. There are many options for customizing
your presentation slides, including an option for showing La-TeX
equations. This can help you collaborate with others and also has an
application in teaching and classroom use.</p>
</section><section><h2 class="section-heading" id="why-learn-r">Why learn R?<a class="anchor" aria-label="anchor" href="#why-learn-r"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing">R does not involve lots of pointing and clicking, and that’s a good
thing<a class="anchor" aria-label="anchor" href="#r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing"></a>
</h3>
<p>The learning curve might be steeper than with other software but with
R, the results of your analysis do not rely on remembering a succession
of pointing and clicking, but instead on a series of written commands,
and that’s a good thing! So, if you want to redo your analysis because
you collected more data, you don’t have to remember which button you
clicked in which order to obtain your results; you just have to run your
script again.</p>
<p>Working with scripts makes the steps you used in your analysis clear,
and the code you write can be inspected by someone else who can give you
feedback and spot mistakes.</p>
<p>Working with scripts forces you to have a deeper understanding of
what you are doing, and facilitates your learning and comprehension of
the methods you use.</p>
</div>
<div class="section level3">
<h3 id="r-code-is-great-for-reproducibility">R code is great for reproducibility<a class="anchor" aria-label="anchor" href="#r-code-is-great-for-reproducibility"></a>
</h3>
<p>Reproducibility is when someone else (including your future self) can
obtain the same results from the same dataset when using the same
analysis.</p>
<p>R integrates with other tools to generate manuscripts from your code.
If you collect more data, or fix a mistake in your dataset, the figures
and the statistical tests in your manuscript are updated
automatically.</p>
<p>An increasing number of journals and funding agencies expect analyses
to be reproducible, so knowing R will give you an edge with these
requirements.</p>
<p>To further support reproducibility and transparency, there are also
packages that help you with dependency management: keeping track of
which packages we are loading and how they depend on the package version
you are using. This helps you make sure existing workflows work
consistently and continue doing what they did before.</p>
<p>Packages like renv let you “save” and “load” the state of your
project library, also keeping track of the package version you use and
the source it can be retrieved from.</p>
</div>
<div class="section level3">
<h3 id="r-is-interdisciplinary-and-extensible">R is interdisciplinary and extensible<a class="anchor" aria-label="anchor" href="#r-is-interdisciplinary-and-extensible"></a>
</h3>
<p>With 10,000+ packages that can be installed to extend its
capabilities, R provides a framework that allows you to combine
statistical approaches from many scientific disciplines to best suit the
analytical framework you need to analyze your data. For instance, R has
packages for image analysis, GIS, time series, population genetics, and
a lot more.</p>
</div>
<div class="section level3">
<h3 id="r-works-on-data-of-all-shapes-and-sizes">R works on data of all shapes and sizes<a class="anchor" aria-label="anchor" href="#r-works-on-data-of-all-shapes-and-sizes"></a>
</h3>
<p>The skills you learn with R scale easily with the size of your
dataset. Whether your dataset has hundreds or millions of lines, it
won’t make much difference to you.</p>
<p>R is designed for data analysis. It comes with special data
structures and data types that make handling of missing data and
statistical factors convenient.</p>
<p>R can connect to spreadsheets, databases, and many other data
formats, on your computer or on the web.</p>
</div>
<div class="section level3">
<h3 id="r-produces-high-quality-graphics">R produces high-quality graphics<a class="anchor" aria-label="anchor" href="#r-produces-high-quality-graphics"></a>
</h3>
<p>The plotting functionalities in R are endless, and allow you to
adjust any aspect of your graph to convey most effectively the message
from your data.</p>
</div>
<div class="section level3">
<h3 id="r-has-a-large-and-welcoming-community">R has a large and welcoming community<a class="anchor" aria-label="anchor" href="#r-has-a-large-and-welcoming-community"></a>
</h3>
<p>Thousands of people use R daily. Many of them are willing to help you
through mailing lists and websites such as <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>, or on the <a href="https://community.rstudio.com/" class="external-link">RStudio community</a>. Questions
which are backed up with <a href="https://www.tidyverse.org/help/" class="external-link">short, reproducible code
snippets</a> are more likely to attract knowledgeable responses.</p>
</div>
<div class="section level3">
<h3 id="not-only-is-r-free-but-it-is-also-open-source-and-cross-platform">Not only is R free, but it is also open-source and
cross-platform<a class="anchor" aria-label="anchor" href="#not-only-is-r-free-but-it-is-also-open-source-and-cross-platform"></a>
</h3>
<p>Anyone can inspect the source code to see how R works. Because of
this transparency, there is less chance for mistakes, and if you (or
someone else) find some, you can report and fix bugs.</p>
<p>Because R is open source and is supported by a large community of
developers and users, there is a very large selection of third-party
add-on packages which are freely available to extend R’s native
capabilities.</p>
<figure><div class="row">
<div class="column">
<figure><img src="fig/r-manual.jpeg" alt="RStudio extends what R can do, and makes it easier to write R code and interact with R." width="100%" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="column">
<figure><img src="fig/r-automatic.jpeg" alt="automatic car gear shift representing the ease of RStudio" width="100%" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<p>:::::</p>
<figcaption><p>RStudio extends what R can do, and makes it easier to write R code
and interact with R.
<a href="https://unsplash.com/photos/D19rXKDUPYM" class="external-link">Left photo credit</a>;
<a href="https://unsplash.com/photos/Wec3M4dY_LE" class="external-link">Right photo
credit</a>.</p>
</figcaption><div class="section level2">
<h2 id="a-tour-of-rstudio">A tour of RStudio<a class="anchor" aria-label="anchor" href="#a-tour-of-rstudio"></a>
</h2>
</div>
<div class="section level2">
<h2 id="knowing-your-way-around-rstudio">Knowing your way around RStudio<a class="anchor" aria-label="anchor" href="#knowing-your-way-around-rstudio"></a>
</h2>
<p>Let’s start by learning about <a href="https://www.rstudio.com/" class="external-link">RStudio</a>, which is an Integrated
Development Environment (IDE) for working with R.</p>
<p>The RStudio IDE open-source product is free under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html" class="external-link">Affero General
Public License (AGPL) v3</a>. The RStudio IDE is also available with a
commercial license and priority email support from RStudio, Inc.</p>
<p>We will use the RStudio IDE to write code, navigate the files on our
computer, inspect the variables we create, and visualize the plots we
generate. RStudio can also be used for other things (e.g., version
control, developing packages, writing Shiny apps) that we will not cover
during the workshop.</p>
<p>One of the advantages of using RStudio is that all the information
you need to write code is available in a single window. Additionally,
RStudio provides many shortcuts, auto completion, and highlighting for
the major file types you use while developing in R. RStudio makes typing
easier and less error-prone.</p>
</div>
<div class="section level2">
<h2 id="getting-set-up">Getting set up<a class="anchor" aria-label="anchor" href="#getting-set-up"></a>
</h2>
<p>It is good practice to keep a set of related data, analyses, and text
self-contained in a single folder called the <strong>working
directory</strong>. All of the scripts within this folder can then use
<em>relative paths</em> to files. Relative paths indicate where inside
the project a file is located (as opposed to absolute paths, which point
to where a file is on a specific computer). Working this way makes it a
lot easier to move your project around on your computer and share it
with others without having to directly modify file paths in the
individual scripts.</p>
<p>RStudio provides a helpful set of tools to do this through its
“Projects” interface, which not only creates a working directory for you
but also remembers its location (allowing you to quickly navigate to
it). The interface also (optionally) preserves custom settings and open
files to make it easier to resume work after a break.</p>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a>
</h3>
<ul>
<li>Under the <code>File</code> menu, click on <code>New project</code>,
choose <code>New directory</code>, then <code>New project</code>
</li>
<li>Enter a name for this new folder (or “directory”) and choose a
convenient location for it. This will be your <strong>working
directory</strong> for the rest of the day (e.g.,
<code>~/data-carpentry</code>)</li>
<li>Click on <code>Create project</code>
</li>
<li>Create a new file where we will type our scripts. Go to File &gt;
New File &gt; R script. Click the save icon on your toolbar and save
your script as “<code>script.R</code>”.</li>
</ul>
<p>The simplest way to open an RStudio project once it has been created
is to navigate through your files to where the project was saved and
double click on the <code>.Rproj</code> (blue cube) file. This will open
RStudio and start your R session in the <strong>same</strong> directory
as the <code>.Rproj</code> file. All your data, plots and scripts will
now be relative to the project directory. RStudio projects have the
added benefit of allowing you to open multiple projects at the same time
each open to its own project directory. This allows you to keep multiple
projects open without them interfering with each other.</p>
</div>
<div class="section level3">
<h3 id="the-rstudio-interface">The RStudio Interface<a class="anchor" aria-label="anchor" href="#the-rstudio-interface"></a>
</h3>
<p>Let’s take a quick tour of RStudio.</p>
<figure><img src="fig/R_00_Rstudio_01.png" alt="Screenshot of the RStudio_startup screen" class="figure mx-auto d-block"></figure><p>RStudio is divided into four “panes”. The placement of these panes
and their content can be customized (see menu, Tools -&gt; Global
Options -&gt; Pane Layout).</p>
<p>The Default Layout is:</p>
<ul>
<li>Top Left - <strong>Source</strong>: your scripts and documents</li>
<li>Bottom Left - <strong>Console</strong>: what R would look and be
like without RStudio</li>
<li>Top Right - <strong>Environment/History</strong>: look here to see
what you have done</li>
<li>Bottom Right - <strong>Files</strong> and more: see the contents of
the project/working directory here, like your Script.R file</li>
</ul>
</div>
<div class="section level3">
<h3 id="organizing-your-working-directory">Organizing your working directory<a class="anchor" aria-label="anchor" href="#organizing-your-working-directory"></a>
</h3>
<p>Using a consistent folder structure across your projects will help
keep things organized and make it easy to find/file things in the
future. This can be especially helpful when you have multiple projects.
In general, you might create directories (folders) for
<strong>scripts</strong>, <strong>data</strong>, and
<strong>documents</strong>. Here are some examples of suggested
directories:</p>
<ul>
<li>
<strong><code>data/</code></strong> Use this folder to store your
raw data and intermediate data sets. For the sake of transparency and <a href="https://en.wikipedia.org/wiki/Provenance" class="external-link">provenance</a>, you
should <em>always</em> keep a copy of your raw data accessible and do as
much of your data cleanup and pre-processing programmatically (i.e.,
with scripts, rather than manually) as possible.</li>
<li>
<strong><code>data_output/</code></strong> When you need to modify
your raw data, it might be useful to store the modified versions of the
data sets in a different folder.</li>
<li>
<strong><code>documents/</code></strong> Used for outlines, drafts,
and other text.</li>
<li>
<strong><code>fig_output/</code></strong> This folder can store the
graphics that are generated by your scripts.</li>
<li>
<strong><code>scripts/</code></strong> A place to keep your R
scripts for different analyses or plotting.</li>
</ul>
<p>You may want additional directories or sub directories depending on
your project needs, but these should form the backbone of your working
directory.</p>
<figure><img src="fig/rstudio_project_files.jpeg" alt="Example of a working directory structure" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="the-working-directory">The working directory<a class="anchor" aria-label="anchor" href="#the-working-directory"></a>
</h3>
<p>The working directory is an important concept to understand. It is
the place where R will look for and save files. When you write code for
your project, your scripts should refer to files in relation to the root
of your working directory and only to files within this structure.</p>
<p>Using RStudio projects makes this easy and ensures that your working
directory is set up properly. If you need to check it, you can use
<code>getwd()</code>. If for some reason your working directory is not
the same as the location of your RStudio project, it is likely that you
opened an R script or RMarkdown file <strong>not</strong> your
<code>.Rproj</code> file. You should close out of RStudio and open the
<code>.Rproj</code> file by double clicking on the blue cube! If you
ever need to modify your working directory in a script,
<code>setwd('my/path')</code> changes the working directory. This should
be used with caution since it makes analyses hard to share across
devices and with other users.</p>
</div>
<div class="section level3">
<h3 id="downloading-the-data-and-getting-set-up">Downloading the data and getting set up<a class="anchor" aria-label="anchor" href="#downloading-the-data-and-getting-set-up"></a>
</h3>
<p>For this lesson we will use the following folders in our working
directory: <strong><code>data/</code></strong> and
<strong><code>fig_output/</code></strong>. Let’s write them all in
lowercase to be consistent. We can create them using the RStudio
interface by clicking on the “New Folder” button in the file pane
(bottom right), or directly from R by typing at console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"fig_output"</span><span class="op">)</span></span></code></pre>
</div>
<p>You can either download the data used for this lesson from GitHub or
with R.</p>
<div class="section level4">
<h4 id="check-in-dataset">Check-In Dataset:<a class="anchor" aria-label="anchor" href="#check-in-dataset"></a>
</h4>
<p>You can either copy the data from <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_data.csv" class="external-link">GitHub</a>
and paste it into a file called <code>checkin_data.csv</code> in the
<code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_data.csv"</span>,</span>
<span>  <span class="st">"data/checkin_data.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="check-in-plotting-dataset">Check-In Plotting Dataset:<a class="anchor" aria-label="anchor" href="#check-in-plotting-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_sample_plotting.csv" class="external-link">GitHub</a>
and paste it into a file called <code>checkin_sample_plotting.csv</code>
in the <code>data/</code> directory or copy-paste the below code chunk
into your terminal:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_sample_plotting.csv"</span>,</span>
<span>  <span class="st">"data/checkin_sample_plotting.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="messy-dataset">Messy Dataset:<a class="anchor" aria-label="anchor" href="#messy-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/messy_data.csv" class="external-link">GitHub
link</a> and paste it into a file called <code>messy_data.csv</code> in
the <code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/messy_data.csv"</span>,</span>
<span>  <span class="st">"messy_data.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="game-of-thrones-dataset">Game of Thrones Dataset:<a class="anchor" aria-label="anchor" href="#game-of-thrones-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/voting_GoT.csv" class="external-link">GitHub
link</a> and paste it into a file called <code>voting_GoT.csv</code> in
the <code>data/</code> directory or copy-paste the below code chunk into
your terminal:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/voting_GoT.csv"</span>,</span>
<span>  <span class="st">"data/voting_GoT.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/polygons_GoT.geojson" class="external-link">GitHub
link</a> and paste it into a file called
<code>polygons_GoT.geojson</code> in the <code>data/</code> directory or
copy-paste the below code chunk into your terminal:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/polygons_GoT.geojson"</span>,</span>
<span>  <span class="st">"polygons_GoT.geojson"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="json-check-in-dataset">JSON Check-In Dataset:<a class="anchor" aria-label="anchor" href="#json-check-in-dataset"></a>
</h4>
<p>You can either copy the data from this <a href="https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_snippet.json" class="external-link">GitHub
link</a> and paste it into a file called
<code>checkin_snippet.json</code> in the <code>data/</code> directory or
copy-paste the below code chunk into your terminal:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/EngineeringForDemocracy/data-empowerment/main/episodes/data/checkin_snippet.json"</span>,</span>
<span>  <span class="st">"data/checkin_snippet.json"</span>, mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="interacting-with-r">Interacting with R<a class="anchor" aria-label="anchor" href="#interacting-with-r"></a>
</h2>
<p>The basis of programming is that we write down instructions for the
computer to follow, and then we tell the computer to follow those
instructions. We write, or <em>code</em>, instructions in R because it
is a common language that both the computer and we can understand. We
call the instructions <em>commands</em> and we tell the computer to
follow the instructions by <em>executing</em> (also called
<em>running</em>) those commands.</p>
<p>There are two main ways of interacting with R: by using the console
or by using script files (plain text files that contain your code). The
console pane (in RStudio, the bottom left panel) is the place where
commands written in the R language can be typed and executed immediately
by the computer. It is also where the results will be shown for commands
that have been executed. You can type commands directly into the console
and press <kbd>Enter</kbd> to execute those commands, but they will be
forgotten when you close the session.</p>
<p>Because we want our code and workflow to be reproducible, it is
better to type the commands we want in the script editor and save the
script. This way, there is a complete record of what we did, and anyone
(including our future selves!) can easily replicate the results on their
computer.</p>
<p>RStudio allows you to execute commands directly from the script
editor by using the <kbd>Ctrl</kbd> + <kbd>Enter</kbd> shortcut (on Mac,
<kbd>Cmd</kbd> + <kbd>Return</kbd> will work). The command on the
current line in the script (indicated by the cursor) or all of the
commands in selected text will be sent to the console and executed when
you press <kbd>Ctrl</kbd> + <kbd>Enter</kbd>. If there is information in
the console you do not need anymore, you can clear it with
<kbd>Ctrl</kbd> + <kbd>L</kbd>. You can find other keyboard shortcuts in
this <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/rstudio-ide.pdf" class="external-link">RStudio
cheatsheet about the RStudio IDE</a>.</p>
<p>At some point in your analysis, you may want to check the content of
a variable or the structure of an object without necessarily keeping a
record of it in your script. You can type these commands and execute
them directly in the console. RStudio provides the <kbd>Ctrl</kbd> +
<kbd>1</kbd> and <kbd>Ctrl</kbd> + <kbd>2</kbd> shortcuts allow you to
jump between the script and the console panes.</p>
<p>If R is ready to accept commands, the R console shows a
<code>&gt;</code> prompt. If R receives a command (by typing,
copy-pasting, or sent from the script editor using <kbd>Ctrl</kbd> +
<kbd>Enter</kbd>), R will try to execute it and, when ready, will show
the results and come back with a new <code>&gt;</code> prompt to wait
for new commands.</p>
<p>If R is still waiting for you to enter more text, the console will
show a <code>+</code> prompt. It means that you haven’t finished
entering a complete command. This is likely because you have not
‘closed’ a parenthesis or quotation, i.e. you don’t have the same number
of left-parentheses as right-parentheses or the same number of opening
and closing quotation marks. When this happens, and you thought you
finished typing your command, click inside the console window and press
<kbd>Esc</kbd>; this will cancel the incomplete command and return you
to the <code>&gt;</code> prompt. You can then proofread the command(s)
you entered and correct the error.</p>
</div>
<div class="section level2">
<h2 id="installing-additional-packages-using-the-packages-tab">Installing additional packages using the packages tab<a class="anchor" aria-label="anchor" href="#installing-additional-packages-using-the-packages-tab"></a>
</h2>
<p>In addition to the core R installation, there are in excess of 10,000
additional packages which can be used to extend the functionality of R.
Many of these have been written by R users and have been made available
in central repositories, like the one hosted at CRAN, for anyone to
download and install into their own R environment. You should have
already installed the packages ‘ggplot2’ and ’dplyr. If you have not,
please do so now using these instructions.</p>
<p>You can see if you have a package installed by looking in the
<code>packages</code> tab (on the lower-right by default). You can also
type the command <code>installed.packages()</code> into the console and
examine the output.</p>
<figure><img src="fig/packages_pane.png" alt="Screenshot of Packages pane" class="figure mx-auto d-block"></figure><p>Additional packages can be installed from the ‘packages’ tab. On the
packages tab, click the ‘Install’ icon and start typing the name of the
package you want in the text box. As you type, packages matching your
starting characters will be displayed in a drop-down list so that you
can select them.</p>
<figure><img src="fig/R_00_Rstudio_03.png" alt="Screenshot of Install Packages Window" class="figure mx-auto d-block"></figure><p>At the bottom of the Install Packages window is a check box to
‘Install’ dependencies. This is ticked by default, which is usually what
you want. Packages can (and do) make use of functionality built into
other packages, so for the functionality contained in the package you
are installing to work properly, there may be other packages which have
to be installed with them. The ‘Install dependencies’ option makes sure
that this happens.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Use both the Console and the Packages tab to confirm that you have
the tidyverse installed.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Scroll through packages tab down to ‘tidyverse’. You can also type a
few characters into the searchbox. The ‘tidyverse’ package is really a
package of packages, including ‘ggplot2’ and ‘dplyr’, both of which
require other packages to run correctly. All of these packages will be
installed automatically. Depending on what packages have previously been
installed in your R environment, the install of ‘tidyverse’ could be
very quick or could take several minutes. As the install proceeds,
messages relating to its progress will be written to the console. You
will be able to see all of the packages which are actually being
installed.</p>
</div>
</div>
</div>
</div>
<p>Because the install process accesses the CRAN repository, you will
need an Internet connection to install packages.</p>
<p>It is also possible to install packages from other repositories, as
well as Github or the local file system, but we won’t be looking at
these options in this lesson.</p>
</div>
<div class="section level2">
<h2 id="installing-additional-packages-using-r-code">Installing additional packages using R code<a class="anchor" aria-label="anchor" href="#installing-additional-packages-using-r-code"></a>
</h2>
<p>If you were watching the console window when you started the install
of ‘tidyverse’, you may have noticed that the line</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre>
</div>
<p>was written to the console before the start of the installation
messages.</p>
<p>You could also have installed the
<strong><code>tidyverse</code></strong> packages by running this command
directly at the R terminal.</p>
<p>We will be using additional packages to manage paths, plots, json
files, and shape files. We will discuss these in more detail in a later
episode, but we will install them now in the console:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"here"</span>, <span class="st">"lattice"</span>, <span class="st">"sf"</span>, <span class="st">"jsonlite"</span><span class="op">)</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use RStudio to write and run R programs.</li>
<li>Use <code>install.packages()</code> to install packages
(libraries).</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</figure>
</div>
</section></section><section id="aio-01-intro-to-r"><p>Content from <a href="01-intro-to-r.html">Introduction to R</a></p>
<hr>
<p>Last updated on 2025-11-14 |

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/episodes/01-intro-to-r.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What data types are available in R?</li>
<li>What is an object?</li>
<li>How can objects of different data types be assigned to names?</li>
<li>What arithmetic and logical operators can be used?</li>
<li>How can subsets be extracted from vectors?</li>
<li>How does R treat missing values?</li>
<li>How can we deal with missing values in R?</li>
<li>How can we work with dates and times in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Define the following terms as they relate to R: object, assign,
call, function, arguments, options.</li>
<li>Assign values to names in R.</li>
<li>Learn how to name objects.</li>
<li>Use comments to inform script.</li>
<li>Solve simple arithmetic operations in R.</li>
<li>Call functions and use arguments to change their default
options.</li>
<li>Inspect the content of vectors and manipulate their content.</li>
<li>Subset values from vectors.</li>
<li>Analyze vectors with missing data.</li>
<li>Work with dates and times in R using proper data types.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="creating-objects-in-r">Creating Objects in R<a class="anchor" aria-label="anchor" href="#creating-objects-in-r"></a>
</h2>
<hr class="half-width">
<p>You can get output from R simply by typing math in the console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">12</span> <span class="op">/</span> <span class="fl">7</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.714286</code></pre>
</div>
<p>Everything that exists in <code>R</code> is an objects: from simple
numerical values, to strings, to more complex objects like vectors,
matrices, and lists. Even expressions and functions are objects in
<code>R</code>.</p>
<p>However, to do useful and interesting things, we need to name
objects. To do so, we need to give a <em>name</em> followed by the
assignment operator <code>&lt;-</code>, and the <em>object</em> we want
to be named:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></code></pre>
</div>
<p><code>&lt;-</code> is the assignment operator. It assigns values
(objects) on the right to names (also called <em>symbols</em>) on the
left. So, after executing <code>x &lt;- 3</code>, the value of
<code>x</code> is <code>3</code>. The arrow can be read as 3
<strong>goes into</strong> <code>x</code>. For historical reasons, you
can also use <code>=</code> for assignments, but not in every context.
Because of the <a href="https://blog.revolutionanalytics.com/2008/12/use-equals-or-arrow-for-assignment.html" class="external-link">slight
differences</a> in syntax, it is good practice to always use
<code>&lt;-</code> for assignments. More generally we prefer the
<code>&lt;-</code> syntax over <code>=</code> because it makes it clear
what direction the assignment is operating (left assignment), and it
increases the read-ability of the code.</p>
<p>In RStudio, typing <kbd>Alt</kbd> + <kbd>-</kbd> (push <kbd>Alt</kbd>
at the same time as the <kbd>-</kbd> key) will write <code>&lt;-</code>
in a single keystroke in a PC, while typing <kbd>Option</kbd> +
<kbd>-</kbd> (push <kbd>Option</kbd> at the same time as the
<kbd>-</kbd> key) does the same in a Mac.</p>
<p>Objects can be given any name such as <code>x</code>,
<code>current_temperature</code>, or <code>subject_id</code>. You want
your object names to be explicit and not too long. They cannot start
with a number (<code>2x</code> is not valid, but <code>x2</code> is). R
is case sensitive (e.g., <code>age</code> is different from
<code>Age</code>). There are some names that cannot be used because they
are the names of fundamental objects in R (e.g., <code>if</code>,
<code>else</code>, <code>for</code>, see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html" class="external-link">R’s
reserved words</a> for a complete list). In general, even if it’s
allowed, it’s best to not use them (e.g., <code>c</code>,
<code>T</code>, <code>mean</code>, <code>data</code>, <code>df</code>,
<code>weights</code>). If in doubt, check the help to see if the name is
already in use. It’s also best to avoid dots (<code>.</code>) within an
object name as in <code>my.dataset</code>. There are many objects in R
with dots in their names for historical reasons, but because dots have a
special meaning in R (for methods) and other programming languages, it’s
best to avoid them. The recommended writing style is called snake_case,
which implies using only lowercase letters and numbers and separating
each word with underscores (e.g., animals_weight, average_income). It is
also recommended to use nouns for object names, and verbs for function
names. It’s important to be consistent in the styling of your code
(where you put spaces, how you name objects, etc.). Using a consistent
coding style makes your code clearer to read for your future self and
yourcollaborators. In R, three popular style guides are <a href="https://google.github.io/styleguide/Rguide.xml" class="external-link">Google’s</a>, <a href="https://jef.works/R-style-guide/" class="external-link">Jean Fan’s</a> and the <a href="https://style.tidyverse.org/" class="external-link">tidyverse’s</a>. The tidyverse’s is
very comprehensive and may seem overwhelming at first. You can install
the <a href="https://github.com/jimhester/lintr" class="external-link"><strong><code>lintr</code></strong></a>
package to automatically check for issues in the styling of your
code.</p>
<div id="objects-vs.-variables" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="objects-vs.-variables" class="callout-inner">
<h3 class="callout-title">Objects vs. Variables</h3>
<div class="callout-content">
<p>The naming of objects in <code>R</code> is somehow related to
<code>variables</code> in many other programming languages. In many
programming languages, a variable has three aspects: a name, a memory
location, and the current value stored in this location. <code>R</code>
abstracts from modifiable memory locations. In <code>R</code> we only
have objects which can be named. Depending on the context,
<code>name (of an object)</code> and <code>variable</code> can have
drastically different meanings. However, in this lesson, the two words
are used synonymously. For more information see: <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects" class="external-link">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects</a></p>
</div>
</div>
</div>
<p>When assigning an value to a name, R does not print anything. You can
force R to print the value by using parentheses or by typing the object
name:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span>    <span class="co"># doesn't print anything</span></span>
<span><span class="op">(</span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">)</span>  <span class="co"># putting parenthesis around the call prints the value of `area_hectares`</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span>         <span class="co"># and so does typing the name of the object</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<p>Now that R has <code>num_precincts</code> in memory, we can do
arithmetic with it. For instance, we may want to calculate the number of
registered voters (assuming there are 1500 voters per precinct):</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7500</code></pre>
</div>
<p>We can also change an the value assigned to an name by assigning it a
new one:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 15000</code></pre>
</div>
<p>This means that assigning a value to one name does not change the
values of other names. For example, let’s name the number of voters
<code>num_voters</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_voters</span> <span class="op">&lt;-</span> <span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span></span></code></pre>
</div>
<p>Next, let’s change (reassign) <code>num_precincts</code> to 50:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">50</span></span></code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>What do you think is the current value of <code>num_voters</code>?
15000 or 75000?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The value of <code>num_voters</code> is still 15000. This is because
you have not re-run the line
<code>num_voters &lt;- 1500 * num_precincts</code> since changing the
value of <code>num_precincts</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="comments">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h2>
<hr class="half-width">
<p>All programming languages allow the programmer to include comments in
their code. Including comments to your code has many advantages: it
helps you explain your reasoning and it forces you to be tidy. A
commented code is also a great tool not only to your collaborators, but
to your future self. Comments are the key to a reproducible
analysis.</p>
<p>To do this in R we use the <code>#</code> character. Anything to the
right of the <code>#</code> sign and up to the end of the line is
treated as a comment and is ignored by R. You can start lines with
comments or include them after any code on the line.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_precincts</span> <span class="op">&lt;-</span> <span class="fl">10</span>      <span class="co">#number of precincts</span></span>
<span><span class="va">num_voters</span> <span class="op">&lt;-</span> <span class="fl">1500</span> <span class="op">*</span> <span class="va">num_precincts</span>  <span class="co">#calculate the total number of voters</span></span>
<span><span class="va">num_voters</span>        <span class="co">#print the total number of voters</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 15000</code></pre>
</div>
<p>RStudio makes it easy to comment or uncomment a paragraph: after
selecting the lines you want to comment, press at the same time on your
keyboard <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>. If you only
want to comment out one line, you can put the cursor at any location of
that line (i.e. no need to select the whole line), then press
<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>.</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Create two variables <code>ballot_cost</code> and
<code>ballots_needed</code> and assign them values.</p></li>
<li><p>Create a third variable <code>total_cost</code> and give it a
value based on the current values of <code>ballot_cost</code> and
<code>ballots_needed</code>.</p></li>
<li><p>Show that changing the values of either <code>ballot_cost</code>
and <code>ballots_needed</code> does not affect the value of
<code>total_cost</code>.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#set the values of ballot_cost and ballots_needed</span></span>
<span><span class="va">ballot_cost</span> <span class="op">&lt;-</span> <span class="fl">0.0125</span></span>
<span><span class="va">ballots_needed</span> <span class="op">&lt;-</span> <span class="fl">2250</span></span>
<span></span>
<span><span class="co">#give total_cost a value</span></span>
<span><span class="va">total_cost</span> <span class="op">&lt;-</span> <span class="va">ballot_cost</span> <span class="op">*</span> <span class="va">ballots_needed</span></span>
<span></span>
<span><span class="co">#print current value of total_cost</span></span>
<span><span class="va">total_cost</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.125</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#change the values of ballot_cost and ballots_needed</span></span>
<span><span class="va">ballot_cost</span> <span class="op">&lt;-</span> <span class="fl">0.068</span></span>
<span><span class="va">ballots_needed</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span>
<span></span>
<span><span class="co">#display the value of total_cost isn't changed</span></span>
<span><span class="va">total_cost</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.125</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="functions-and-their-arguments">Functions and Their Arguments<a class="anchor" aria-label="anchor" href="#functions-and-their-arguments"></a>
</h3>
<p>Functions are “canned scripts” that automate more complicated sets of
commands including operations assignments, etc. Many functions are
predefined, or can be made available by importing R <em>packages</em>
(more on that later). A function usually gets one or more inputs called
<em>arguments</em>. Functions often (but not always) return a
<em>value</em>. A typical example would be the function
<code>sqrt()</code>. The input (the argument) must be a number, and the
return value (in fact, the output) is the square root of that number.
Executing a function (‘running it’) is called <em>calling</em> the
function. An example of a function call is:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">sqrt</span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre>
</div>
<p>Here, the value of <code>a</code> is given to the <code>sqrt()</code>
function, the <code>sqrt()</code> function calculates the square root,
and returns the value which is then assigned to the name <code>b</code>.
This function is very simple, because it takes just one argument.</p>
<p>The return ‘value’ of a function need not be numerical (like that of
<code>sqrt()</code>), and it also does not need to be a single item: it
can be a set of things, or even a data set. We’ll see that when we read
data files into R.</p>
<p>Arguments can be anything, not only numbers or file names, but also
other objects. Exactly what each argument means differs per function,
and must be looked up in the documentation (see below). Some functions
take arguments which may either be specified by the user, or, if left
out, take on a <em>default</em> value: these are called
<em>options</em>. Options are typically used to alter the way the
function operates, such as whether it ignores ‘bad values’, or what
symbol to use in a plot. However, if you want something specific, you
can specify a value of your choice which will be used instead of the
default.</p>
<p>Using the total_cost we calculated above, let’s try a function that
can take multiple arguments: <code>round()</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28</code></pre>
</div>
<p>Here, we’ve called <code>round()</code> with just one argument,
<code>total_cost</code>, and it has returned the value <code>28</code>.
That’s because the default is to round to the nearest whole number. If
we want more digits we can see how to do that by getting information
about the <code>round</code> function. We can use
<code>args(round)</code> or look at the help for this function using
<code>?round</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">args</span><span class="op">(</span><span class="va">round</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="kw">function</span> <span class="op">(</span><span class="va">x</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">round</span></span></code></pre>
</div>
<p>We see that if we want a different number of digits, we can type
<code>digits=2</code> or however many we want.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>If you provide the arguments in the exact same order as they are
defined you don’t have to name them:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span><span class="va">total_cost</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>And if you do name the arguments, you can switch their order:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">round</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span>, x <span class="op">=</span> <span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.12</code></pre>
</div>
<p>It’s good practice to put the non-optional arguments (like the number
you’re rounding) first in your function call, and to specify the names
of all optional arguments. If you don’t, someone reading your code might
have to look up the definition of a function with unfamiliar arguments
to understand what you’re doing.</p>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>As you may have noticed, in both cases of rounding, the total_cost
rounded down. However, when calculating the total cost of something, you
should always round UP to the nearest dollar or cent.</p>
<p>For this exercise, type in <code>?round</code> at the console and
then look at the output in the Help panel. What other function similar
to <code>round</code> should be used instead? Apply this function to
round up to the nearest <em>dollar</em>.</p>
<p>Bonus: apply this function to round to the nearest <em>cent</em>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The <code>ceiling</code> function rounds up to the nearest
integer!</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ceiling</span><span class="op">(</span><span class="va">total_cost</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 29</code></pre>
</div>
<p>To use the function to round to the nearest cent, you can do the
following:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ceiling</span><span class="op">(</span><span class="va">total_cost</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.13</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="vectors-and-data-types">Vectors and Data Types<a class="anchor" aria-label="anchor" href="#vectors-and-data-types"></a>
</h2>
<hr class="half-width">
<p>A vector is the most common and basic data type in R, and is pretty
much the workhorse of R. A vector is composed by a series of values,
which can be either numbers, characters, or other data types. We can
assign a series of values to a vector using the <code>c()</code>
function. For example, we can create a vector of job type strings, and
we can create another vector storing numbers of votes at different
precincts</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">4300</span>, <span class="fl">2340</span>, <span class="fl">7190</span><span class="op">)</span></span>
<span><span class="va">votes_per_precinct</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 4300 2340 7190</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"   "check-out"  "supervisor"</code></pre>
</div>
<p>The quotes around “check-in”, “check-out”, and “supervisor”are
essential here. Without the quotes, R will assume there are objects
called <code>check-in</code>, <code>check-out</code>, and
<code>supervisor</code>. Since these names don’t exist in R’s memory,
there will be an error message.</p>
<p>Additionally, you may notice there are no commas in-between the
thousands. In R, you <em>cannot</em> add commas in numbers, as R will
assume they are separate items in the list.</p>
<p>There are many functions that allow you to inspect the content of a
vector. <code>length()</code> tells you how many elements are in a
particular vector:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4</code></pre>
</div>
<p>An important feature of a vector is that all of the elements are the
same type of data. The function <code>typeof()</code> indicates the type
of an object:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<p>The function <code>str()</code> provides an overview of the structure
of an object and its elements. It is a useful function when working with
large and complex objects:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">votes_per_precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:4] 1000 4300 2340 7190</code></pre>
</div>
<p>You can use the <code>c()</code> function to add other elements to
your vector:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">devices_per_precinct</span>, <span class="fl">9</span><span class="op">)</span> <span class="co"># add to the end of the vector</span></span>
<span><span class="va">devices_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">6</span>, <span class="va">devices_per_precinct</span><span class="op">)</span> <span class="co"># add to the beginning of the vector</span></span>
<span><span class="va">devices_per_precinct</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6 5 2 9</code></pre>
</div>
<p>In the first line, we take the original vector
<code>devices_per_precinct</code>, add the value <code>9</code> to the
end of it, and save the result back into
<code>devices_per_precinct</code>. Then we add the value <code>6</code>
to the beginning, again saving the result back into
<code>devices_per_precinct</code>.</p>
<p>We can do this over and over again to grow a vector, or assemble a
data set. As we program, this may be useful to add results that we are
collecting or calculating.</p>
<p>An <strong>atomic vector</strong> is the simplest R <strong>data
type</strong> and is a linear vector of a single type. Above, we saw 2
of the 6 main <strong>atomic vector</strong> types that R uses:
<code>"character"</code> and <code>"numeric"</code> (or
<code>"double"</code>). These are the basic building blocks that all R
objects are built from. The other 4 <strong>atomic vector</strong> types
are:</p>
<ul>
<li>
<code>"logical"</code> for <code>TRUE</code> and <code>FALSE</code>
(the boolean data type)</li>
<li>
<code>"integer"</code> for integer numbers (e.g., <code>2L</code>,
the <code>L</code> indicates to R that it’s an integer)</li>
<li>
<code>"complex"</code> to represent complex numbers with real and
imaginary parts (e.g., <code>1 + 4i</code>) and that’s all we’re going
to say about them</li>
<li>
<code>"raw"</code> for bit-streams (we won’t be discussing this
further)</li>
</ul>
<div class="section level3">
<h3 id="date-types">Date Types<a class="anchor" aria-label="anchor" href="#date-types"></a>
</h3>
<p>Dates are a common data type that require special attention. In R,
dates can be represented in two ways:</p>
<ol style="list-style-type: decimal">
<li>As character strings (e.g., “2018-11-06 07:02:36”, “11/06/2018
07:02:36”)</li>
<li>As Date or POSIXct objects which are special data types for dates
and times</li>
</ol>
<p>When dates are stored as strings, they’re treated like any other
text:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">checkin_times_as_strings</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"2018-11-06 07:02:36"</span>, <span class="st">"2018-11-06 07:04:09"</span>, <span class="st">"2018-11-06 07:05:45"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">checkin_times_as_strings</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>However, storing dates as proper Date or POSIXct objects offers
several advantages: - You can perform arithmetic with dates (calculate
time differences) - You can extract components like month, year, or day
- You can easily format dates for display - You can sort dates
chronologically</p>
<p>To convert strings to Date or POSIXct objects, use the
<code>as.POSIXct()</code> function:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#convert strings to POSIXct objects</span></span>
<span><span class="va">checkin_times</span> <span class="op">&lt;-</span> <span class="fu">as.POSIXct</span><span class="op">(</span><span class="va">checkin_times_as_strings</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">checkin_times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">checkin_times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "POSIXct" "POSIXt" </code></pre>
</div>
<p>The following “leap year” scenario highlights the importance of using
proper date types. Consider the following example:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#BAD: using strings for date arithmetic</span></span>
<span><span class="va">date_start</span> <span class="op">&lt;-</span> <span class="st">"2020-02-28"</span></span>
<span><span class="va">date_end</span> <span class="op">&lt;-</span> <span class="st">"2020-03-01"</span></span>
<span></span>
<span><span class="co">#attempt to calculate the difference by converting strings to numeric days</span></span>
<span><span class="co">#here we use substr to extract the day portion in string format.</span></span>
<span><span class="co">#it draws the characters at position 9 to 10 and converts them to numeric</span></span>
<span><span class="va">difference_wrong</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">substr</span><span class="op">(</span><span class="va">date_end</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">substr</span><span class="op">(</span><span class="va">date_start</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">difference_wrong</span> <span class="co">#incorrect!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -27</code></pre>
</div>
<p>In this example, we extract the day portion of the dates as strings
and subtract them. While this works for simple cases, it fails to
account for: - The transition between months (e.g., February to March).
- Leap years (e.g., February 29 in 2020).</p>
<p>Now, compare this with proper date types:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#GOOD: using Date for leap year handling</span></span>
<span><span class="va">date_start_correct</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_start</span><span class="op">)</span></span>
<span><span class="va">date_end_correct</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_end</span><span class="op">)</span></span>
<span></span>
<span><span class="va">difference_correct</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">date_end_correct</span> <span class="op">-</span> <span class="va">date_start_correct</span><span class="op">)</span></span>
<span><span class="va">difference_correct</span> <span class="co">#correctly computes 2 days, accounting for February 29 in the leap year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>Now, the number of days has been calculated properly!</p>
<p>It’s important to note that Date objects and POSIXct objects are not
made equal and, while we used the two types interchangeably above, you
should ensure you choose the one that fits your data needs. The key
differences between Date objects and POSIXct objects can be seen below:
- Date: - Represents dates without time. - Useful for operations where
time is irrelevant (e.g., calculating the number of days between two
dates). - Stored as the number of days since January 1, 1970. -
`POSIXct: - Represents both date and time. - Useful for operations
involving time (e.g., calculating the number of seconds or hours between
two timestamps). - Stored as the number of seconds since January 1,
1970.</p>
<p>Using proper date types ensures that leap years and other
calendar-specific rules are handled correctly, making computations
accurate and reliable.</p>
</div>
<div class="section level3">
<h3 id="coercion">Coercion<a class="anchor" aria-label="anchor" href="#coercion"></a>
</h3>
<p>An important characteristic of vectors is that they can only contain
elements of the same data type. If you attempt to combine different
types in a vector, R will automatically convert them to a single, common
type - a process called “coercion”. This follows a hierarchy: character
&gt; numeric (double) &gt; integer &gt; logical.</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Coercion examples</span></span>
<span><span class="va">num_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># TRUE converted to 1</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">num_logical</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_character</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span><span class="op">)</span> <span class="co"># 1 converted to "1"</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">num_character</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logical_character</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"a"</span><span class="op">)</span> <span class="co"># TRUE converted to "TRUE"</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">logical_character</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tricky</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"2"</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Everything becomes character</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">tricky</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>R will always try to find a common data type that doesn’t lose
information. Typically, this means converting toward the more flexible
type (with character being the most flexible).</p>
<p>Note: Date/POSIXct will always be treated as “numeric” (days/seconds
since January 1st, 1970) when being coerced within a vector!</p>
<div id="exercise-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-3" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Predict the resulting data type for this vector:
<code>c(1.1, 2L, TRUE, "a")</code></p></li>
<li>
<p>Create a vector that contains:</p>
<ul>
<li>The number 5</li>
<li>The logical value FALSE</li>
<li>The string “data”</li>
</ul>
<p>What is the resulting data type? Why?</p>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>The vector <code>c(1.1, 2L, TRUE, "a")</code> will have type
“character” because character is the most flexible data type.</p></li>
<li><p>The vector would be:</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mixed</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5</span>, <span class="cn">FALSE</span>, <span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">mixed</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>It has type “character” because R coerces all elements to the most
flexible data type that includes all values.</p>
</div>
</div>
</div>
</div>
<p>Vectors are one of the many <strong>data structures</strong> that R
uses. Other important ones are lists (<code>list</code>), matrices ,
data frames (<code>data.frame</code>), tibbles (<code>tbl</code>),
factors (<code>factor</code>) and arrays (<code>array</code>).</p>
</div>
</section><section><h2 class="section-heading" id="subsetting-vectors">Subsetting vectors<a class="anchor" aria-label="anchor" href="#subsetting-vectors"></a>
</h2>
<hr class="half-width">
<p>Subsetting (sometimes referred to as extracting or indexing) involves
accessing one or more values based on their numeric placement or “index”
within a vector. If we want to subset one or several values from a
vector, we must provide one index or several indices in square brackets.
For instance:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-out"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "supervisor" "check-out" </code></pre>
</div>
<p>We can also repeat the indices to create an object with more elements
than the original one:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">more_jobs</span> <span class="op">&lt;-</span> <span class="va">job_types</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">more_jobs</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"   "check-out"  "supervisor" "check-out"  "check-in"
[6] "supervisor"</code></pre>
</div>
<div class="section level3">
<h3 id="conditional-subsetting">Conditional subsetting<a class="anchor" aria-label="anchor" href="#conditional-subsetting"></a>
</h3>
<p>Another common way of subsetting is by using a logical vector.
<code>TRUE</code> will select the element with the same index, while
<code>FALSE</code> will not:</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">4300</span>, <span class="fl">2340</span>, <span class="fl">7190</span><span class="op">)</span></span>
<span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 2340 7190</code></pre>
</div>
<p>Typically, these logical vectors are not typed by hand, but are the
output of other functions or logical tests. For instance, if you wanted
to select only the values greater than 2500:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">2500</span>    <span class="co"># will return logicals with TRUE for the indices that meet the condition</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## so we can use this to select only the values greater than 2866</span></span>
<span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">2500</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4300 7190</code></pre>
</div>
<p>You can combine multiple tests using <code>&amp;</code> (both
conditions are true, AND) or <code>|</code> (at least one of the
conditions is true, OR):</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&lt;</span> <span class="fl">2000</span> <span class="op">|</span> <span class="va">votes_per_precinct</span> <span class="op">&gt;</span> <span class="fl">4000</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000 4300 7190</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">votes_per_precinct</span><span class="op">[</span><span class="va">votes_per_precinct</span> <span class="op">&gt;=</span> <span class="fl">2000</span> <span class="op">&amp;</span> <span class="va">votes_per_precinct</span> <span class="op">&lt;=</span> <span class="fl">4000</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2340</code></pre>
</div>
<p>Here, <code>&lt;</code> stands for “less than”, <code>&gt;</code> for
“greater than”, <code>&gt;=</code> for “greater than or equal to”, and
<code>==</code> for “equal to”. The double equal sign <code>==</code> is
a test for numerical equality between the left and right-hand sides, and
should not be confused with the single <code>=</code> sign, which
performs variable assignment (similar to <code>&lt;-</code>).</p>
<p>A common task is to search for certain strings in a vector. One could
use the “or” operator <code>|</code> to test for equality to multiple
values, but this can quickly become tedious.</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span>, <span class="st">"supervisor"</span><span class="op">)</span></span>
<span><span class="va">job_types</span><span class="op">[</span><span class="va">job_types</span> <span class="op">==</span> <span class="st">"check-in"</span> <span class="op">|</span> <span class="va">job_types</span> <span class="op">==</span> <span class="st">"check-out"</span><span class="op">]</span> <span class="co"># returns both check-in and check-out</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"  "check-out"</code></pre>
</div>
<p>The function <code>%in%</code> allows you to test if any of the
elements of a search vector (on the left-hand side) are found in the
target vector (on the right-hand side):</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<p>Note that the output is the same length as the search vector on the
left-hand side, because <code>%in%</code> checks whether each element of
the search vector is found somewhere in the target vector. Thus, you can
use <code>%in%</code> to select the elements in the search vector that
appear in your target vector:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_types</span><span class="op">[</span><span class="va">job_types</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"check-in"</span>, <span class="st">"check-out"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "check-in"  "check-out"</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h2>
<hr class="half-width">
<p>As R was designed to analyze data sets, it includes the concept of
missing data (which is uncommon in other programming languages). Missing
data are represented in vectors as <code>NA</code>.</p>
<p>When doing operations on numbers, most functions will return
<code>NA</code> if the data you are working with include missing values.
This feature makes it harder to overlook the cases where you are dealing
with missing data. You can add the argument <code>na.rm = TRUE</code> to
calculate the result while ignoring the missing values.</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create vector</span></span>
<span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">64</span>, <span class="fl">74</span>, <span class="cn">NA</span>, <span class="fl">287</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#calc with NA</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calc without NA</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 141.6667</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 287</code></pre>
</div>
<p>If your data include missing values, you may want to become familiar
with the functions <code>is.na()</code>, <code>na.omit()</code>, and
<code>complete.cases()</code>. See below for examples:</p>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Extract those elements which are not missing values.</span></span>
<span><span class="co">## The ! character is also called the NOT operator</span></span>
<span><span class="va">checkin_lengths</span><span class="op">[</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Count the number of missing values.</span></span>
<span><span class="co">## The output of is.na() is a logical vector (TRUE/FALSE equivalent to 1/0) so the sum() function here is effectively counting</span></span>
<span><span class="fu">sum</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Returns the object with incomplete cases removed. The returned object is an atomic vector of type `"numeric"` (or `"double"`).</span></span>
<span><span class="fu">na.omit</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287
attr(,"na.action")
[1] 3
attr(,"class")
[1] "omit"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Extract those elements which are complete cases. The returned object is an atomic vector of type `"numeric"` (or `"double"`).</span></span>
<span><span class="va">checkin_lengths</span><span class="op">[</span><span class="fu">complete.cases</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  64  74 287</code></pre>
</div>
<p>Recall that you can use the <code>typeof()</code> function to find
the type of your atomic vector.</p>
<div id="exercise-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-4" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Using this vector of check-in lengths, create a new vector with the
NAs removed.</li>
</ol>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">54</span>, <span class="fl">21</span>, <span class="fl">74</span>, <span class="fl">65</span>, <span class="cn">NA</span>, <span class="fl">72</span>, <span class="fl">21</span>, <span class="fl">16</span>, <span class="fl">46</span>, <span class="fl">58</span>, <span class="fl">43</span>, <span class="fl">61</span>, <span class="fl">39</span>, <span class="fl">19</span>, <span class="cn">NA</span>, <span class="fl">24</span><span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>Use the function <code>median()</code> to calculate the median of
the <code>checkin_lengths</code> vector.</p></li>
<li><p>Use R to figure out how many check-ins took longer than 55
seconds.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb109">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#1.</span></span>
<span><span class="va">checkin_lengths</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">54</span>, <span class="fl">21</span>, <span class="fl">74</span>, <span class="fl">65</span>, <span class="cn">NA</span>, <span class="fl">72</span>, <span class="fl">21</span>, <span class="fl">16</span>, <span class="fl">46</span>, <span class="fl">58</span>, <span class="fl">43</span>, <span class="fl">61</span>, <span class="fl">39</span>, <span class="fl">19</span>, <span class="cn">NA</span>, <span class="fl">24</span><span class="op">)</span></span>
<span><span class="va">checkin_lengths_no_na</span> <span class="op">&lt;-</span> <span class="va">checkin_lengths</span><span class="op">[</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># or</span></span>
<span><span class="va">checkin_lengths_no_na</span> <span class="op">&lt;-</span> <span class="fu">na.omit</span><span class="op">(</span><span class="va">checkin_lengths</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2.</span></span>
<span><span class="fu">median</span><span class="op">(</span><span class="va">checkin_lengths</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 44.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb111">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3.</span></span>
<span><span class="va">checkin_lengths_above_55</span> <span class="op">&lt;-</span> <span class="va">checkin_lengths_no_na</span><span class="op">[</span><span class="va">checkin_lengths_no_na</span> <span class="op">&gt;</span> <span class="fl">55</span><span class="op">]</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">checkin_lengths_above_55</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Access individual values by location using <code>[]</code>.</li>
<li>Access arbitrary sets of data using <code>[c(...)]</code>.</li>
<li>Use logical operations and logical vectors to access subsets of
data.</li>
<li>Use proper date types (Date and POSIXct) instead of strings for date
arithmetic.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-starting-with-data"><p>Content from <a href="02-starting-with-data.html">Starting with Data</a></p>
<hr>
<p>Last updated on 2025-11-14 |

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/episodes/02-starting-with-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is an R package?</li>
<li>What is a data.frame?</li>
<li>What is a tibble, and how is it different from a data frame?</li>
<li>How can I read a complete csv file into R?</li>
<li>How can I get basic summary information about my data set?</li>
<li>How can I change the way R treats strings in my data set?</li>
<li>Why would I want strings to be treated differently?</li>
<li>How are dates represented in data sets and how can I change the
format?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand what an R package is.</li>
<li>Describe what a data frame is.</li>
<li>Describe what a tibble is.</li>
<li>Load external data from a .csv file into a tibble.</li>
<li>Summarize the contents of a tibble.</li>
<li>Subset values from a tibble.</li>
<li>Describe the difference between a factor and a string.</li>
<li>Convert between strings and factors.</li>
<li>Reorder and rename factors.</li>
<li>Change how character strings are handled in a tibble.</li>
<li>Examine and change date formats within a data set.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-an-r-package">What is an R package?<a class="anchor" aria-label="anchor" href="#what-is-an-r-package"></a>
</h2>
<hr class="half-width">
<p>An R package is a collection of functions and (occasionally) data
sets that extend the functionality of R. Throughout these lessons, we
will primarily be using the <strong><code>tidyverse</code></strong>,
which is a collection of R packages designed to make data science
easier!</p>
<p>When installing and loading <strong><code>tidyverse</code></strong>,
the following are all of the packages that are installed/loaded as part
of the collection:</p>
<ul>
<li><strong><code>ggplot2</code></strong></li>
<li><strong><code>dplyr</code></strong></li>
<li><strong><code>tidyr</code></strong></li>
<li><strong><code>readr</code></strong></li>
<li><strong><code>tibble</code></strong></li>
<li><strong><code>forcats</code></strong></li>
<li><strong><code>lubridate</code></strong></li>
<li><strong><code>stringr</code></strong></li>
<li><strong><code>purrr</code></strong></li>
</ul>
<p>You can learn more about the <strong><code>tidyverse</code></strong>
collection of packages by visiting the <a href="https://www.tidyverse.org/" class="external-link">tidyverse website</a>.</p>
<p>There are also packages available for a wide range of tasks including
downloading data from the NCBI database or performing statistical
analysis on your data set. Many packages such as these are housed on,
and downloadable from, the <strong>C</strong>omprehensive
<strong>R</strong> <strong>A</strong>rchive <strong>N</strong>etwork
(CRAN) using <code>install.packages</code>. This function makes the
package accessible by your R installation with the command
<code>library()</code>.</p>
<p>To easily access the documentation for a package within R or RStudio,
use <code><a href="https://rdrr.io/pkg/package_name/man" class="external-link">help(package = "package_name")</a></code>.</p>
<div id="note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p>There are alternatives to the <code>tidyverse</code> packages for
data wrangling, including the package <a href="https://rdatatable.gitlab.io/data.table/" class="external-link"><code>data.table</code></a>.
See this <a href="https://mgimond.github.io/rug_2019_12/Index.html" class="external-link">comparison</a>
for example to get a sense of the differences between using
<code>base</code>, <code>tidyverse</code>, and
<code>data.table</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-are-data-frames">What are data frames?<a class="anchor" aria-label="anchor" href="#what-are-data-frames"></a>
</h2>
<hr class="half-width">
<p>Data frames are the <em>de facto</em> data structure for tabular data
in <code>R</code>, and what we use for data processing, statistics, and
plotting.</p>
<p>A data frame is the representation of data in the format of a table
where the columns are vectors that all have the same length. Data frames
are analogous to the more familiar spreadsheet in programs such as
Excel, with one key difference. Because columns are vectors, each column
must contain a single type of data (e.g., characters, integers,
factors). For example, here is a figure depicting a data frame
comprising a numeric, a character, and a logical vector.</p>
<figure><img src="fig/data-frame.svg" alt="A 3 by 3 data frame with columns showing numeric, character and logical values." class="figure mx-auto d-block"></figure><p>Data frames can be created by hand, but most commonly they are
generated by the functions <code>read_csv()</code> or
<code>read_table()</code>; in other words, when importing spreadsheets
from your hard drive (or the web). We will now demonstrate how to import
tabular data using <code>read_csv()</code>.</p>
</section><section><h2 class="section-heading" id="introduction-to-the-check-in-dataset">Introduction to the Check-In Dataset<a class="anchor" aria-label="anchor" href="#introduction-to-the-check-in-dataset"></a>
</h2>
<hr class="half-width">
<p>The Check-In Dataset is an example data set that is based on the 2018
election. Each row in the data set represents one ballot case, and
includes an ID, check-in length, arrival time, location, precinct, and
machine.</p>
<p>The following is a visual representation of the data set’s
columns:</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="86%">
</colgroup>
<thead><tr>
<th>column_name</th>
<th>description</th>
</tr></thead>
<tbody>
<tr>
<td>checkin_id</td>
<td>Provides a unique key/ID for each ballot instance.</td>
</tr>
<tr>
<td>checkin_length</td>
<td>How long it took the person submitting the ballot to check-in to the
polling location.</td>
</tr>
<tr>
<td>checkin_time</td>
<td>The arrival time of the person submitting the ballot, includes both
the date and time.</td>
</tr>
<tr>
<td>location</td>
<td>Anonymized ID for the location of the ballot box.</td>
</tr>
<tr>
<td>precinct</td>
<td>Anonymized ID for the precinct that the ballot box belongs to.</td>
</tr>
<tr>
<td>device</td>
<td>Anonymized ID for each ballot box.</td>
</tr>
</tbody>
</table></section><section><h2 class="section-heading" id="importing-data">Importing Data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h2>
<hr class="half-width">
<p>You are going to load the data in R’s memory using the function
<code>read_csv()</code>. This is from the
<strong><code>readr</code></strong> package, which (as you may remember)
is part of the <strong><code>tidyverse</code></strong>.</p>
<p>Before proceeding, however, this is a good opportunity to talk about
conflicts. Certain packages we load can end up introducing function
names that are already in use by pre-loaded R packages. For instance,
when we load the tidyverse package below, we will introduce two
conflicting functions: <code>filter()</code> and <code>lag()</code>.
This happens because <code>filter</code> and <code>lag</code> are
already functions used by the stats package (which comes pre-loaded in
R). What will happen now is that if we, for example, call the
<code>filter()</code> function, R will use the
<code>dplyr::filter()</code> version and not the
<code>stats::filter()</code> one. This happens because, if conflicted,
by default R uses the function from the most recently loaded package.
Conflicted functions may cause you some trouble in the future, so it is
important that we are aware of them so that we can properly handle them,
if we want.</p>
<p>To do so, we just need the following functions from the conflicted
package:</p>
<ul>
<li>
<code>conflicted::conflict_scout()</code>: Shows us any conflicted
functions.<br>
</li>
<li>
<code>conflict_prefer("function", "package_prefered")</code>: Allows
us to choose the default function we want from now on.</li>
</ul>
<p>It is also important to know that we can, at any time, just call the
function directly from the package we want, such as
<code>stats::filter()</code>.</p>
<p>Even with the use of an RStudio project, it can be difficult to learn
how to specify paths to file locations. Enter the <strong>here</strong>
package! The here package creates paths relative to the top-level
directory (your RStudio project). These relative paths work
<em>regardless</em> of where the associated source file lives inside
your project, like analysis projects with data and reports in different
sub-directories. This is an important contrast to using
<code>setwd()</code>, which depends on the way you order your files on
your computer.</p>
<figure><img src="fig/here_horst.png" alt="Monsters at a fork in the road, with signs saying here, and not here. One direction, not here, leads to a scary dark forest with spiders and absolute filepaths, while the other leads to a sunny, green meadow, and a city below a rainbow and a world free of absolute filepaths. Art by Allison Horst" width="100%" style="display: block; margin: auto;" class="figure"><figcaption>
Image credit:
<a href="https://github.com/allisonhorst/stats-illustrations" class="external-link">Allison
Horst</a>
</figcaption></figure><p>Before we can use the <code>read_csv()</code> and <code>here()</code>
functions, we need to load the tidyverse and here packages.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#loads in the tidyverse and here packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in library(here): there is no package called 'here'</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#reads in data and assigns it to the 'data' variable using 'here'</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in here("data", "checkin_data.csv"): could not find function "here"</code></pre>
</div>
<p>In the above code, we notice the <code>here()</code> function takes
folder and file names as inputs (e.g., <code>"data"</code>,
<code>"checkin_data.csv"</code>), each enclosed in quotations
(<code>""</code>) and separated by a comma. The <code>here()</code> will
accept as many names as are necessary to navigate to a particular
file.</p>
<p>For example, let’s say you have both an RMarkdown file and a folder
called <code>"info"</code> that contains multiple CSV files (including
<code>"data.csv"</code>) on your Desktop. If you want to access
<code>"data.csv"</code> within your RMarkdown file, you can use
<code>here("info", "data.csv")</code>.</p>
<p>The <code>here()</code> function can accept the folder and file names
in an alternate format, using a slash (“/”) rather than commas to
separate the names. The two methods are equivalent, so that
<code>here("data", "checkin_data.csv")</code> and
<code>here("data/checkin_data.csv")</code> produce the same result. (The
forward slash is used on all operating systems; backslashes are never
used.)</p>
<p>If you were to type in the code above, it is likely that the
<code>read.csv()</code> function would appear in the automatically
populated list of functions. This function is different from the
<code>read_csv()</code> function, as it is included in the “base”
packages that come pre-installed with R. Overall,
<code>read.csv()</code> behaves similar to <code>read_csv()</code>, with
a few notable differences. First, <code>read.csv()</code> coerces column
names with spaces and/or special characters to different names
(e.g. <code>interview date</code> becomes
<code>interview.date</code>).</p>
<p>Second, <code>read.csv()</code> stores data as a
<code>data.frame</code>, where <code>read_csv()</code> stores data as a
different kind of data frame called a <code>tibble</code>. A tibble is
an extension of <code>R</code> data frames used by the
<strong><code>tidyverse</code></strong>. We prefer tibbles because they
have nice printing properties among other desirable qualities. You can
read more about <a href="https://tibble.tidyverse.org/" class="external-link">tibbles in its
docs</a>.</p>
<p>Additionally, the <code>read_csv()</code> statement in the code above
creates a tibble but doesn’t output any data because, as you might
recall, assignments (<code>&lt;-</code>) don’t display anything. Note,
however, that <code>read_csv</code> may show informational text about
the data frame that is created.</p>
<p>If we want to check that our tibble has been loaded, we can see the
contents of the data by typing its name: <code>data</code> in the
console:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span></span>
<span><span class="co">## Try also</span></span>
<span><span class="co">## view(interviews)</span></span>
<span><span class="co">## head(interviews)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (..., list = character(), package = NULL, lib.loc = NULL,
    verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE)
{
    fileExt &lt;- function(x) {
        db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)
        ans &lt;- sub(".*\\.", "", x)
        ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2",
            x[db])
        ans
    }
    my_read_table &lt;- function(...) {
        lcc &lt;- Sys.getlocale("LC_COLLATE")
        on.exit(Sys.setlocale("LC_COLLATE", lcc))
        Sys.setlocale("LC_COLLATE", "C")
        read.table(...)
    }
    stopifnot(is.character(list))
    names &lt;- c(as.character(substitute(list(...))[-1L]), list)
    if (!is.null(package)) {
        if (!is.character(package))
            stop("'package' must be a character vector or NULL")
    }
    paths &lt;- find.package(package, lib.loc, verbose = verbose)
    if (is.null(lib.loc))
        paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(),
            paths)
    paths &lt;- unique(normalizePath(paths[file.exists(paths)]))
    paths &lt;- paths[dir.exists(file.path(paths, "data"))]
    dataExts &lt;- tools:::.make_file_exts("data")
    if (length(names) == 0L) {
        db &lt;- matrix(character(), nrow = 0L, ncol = 4L)
        for (path in paths) {
            entries &lt;- NULL
            packageName &lt;- if (file_test("-f", file.path(path,
                "DESCRIPTION")))
                basename(path)
            else "."
            if (file_test("-f", INDEX &lt;- file.path(path, "Meta",
                "data.rds"))) {
                entries &lt;- readRDS(INDEX)
            }
            else {
                dataDir &lt;- file.path(path, "data")
                entries &lt;- tools::list_files_with_type(dataDir,
                  "data")
                if (length(entries)) {
                  entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))
                  entries &lt;- cbind(entries, "")
                }
            }
            if (NROW(entries)) {
                if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L)
                  db &lt;- rbind(db, cbind(packageName, dirname(path),
                    entries))
                else warning(gettextf("data index for package %s is invalid and will be ignored",
                  sQuote(packageName)), domain = NA, call. = FALSE)
            }
        }
        colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")
        footer &lt;- if (missing(package))
            paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")),
                "\n", "to list the data sets in all *available* packages.")
        else NULL
        y &lt;- list(title = "Data sets", header = NULL, results = db,
            footer = footer)
        class(y) &lt;- "packageIQR"
        return(y)
    }
    paths &lt;- file.path(paths, "data")
    for (name in names) {
        found &lt;- FALSE
        for (p in paths) {
            tmp_env &lt;- if (overwrite)
                envir
            else new.env()
            if (file_test("-f", file.path(p, "Rdata.rds"))) {
                rds &lt;- readRDS(file.path(p, "Rdata.rds"))
                if (name %in% names(rds)) {
                  found &lt;- TRUE
                  if (verbose)
                    message(sprintf("name=%s:\t found in Rdata.rds",
                      name), domain = NA)
                  objs &lt;- rds[[name]]
                  lazyLoad(file.path(p, "Rdata"), envir = tmp_env,
                    filter = function(x) x %in% objs)
                  break
                }
                else if (verbose)
                  message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n",
                    name, paste(names(rds), collapse = ",")),
                    domain = NA)
            }
            files &lt;- list.files(p, full.names = TRUE)
            files &lt;- files[grep(name, files, fixed = TRUE)]
            if (length(files) &gt; 1L) {
                o &lt;- match(fileExt(files), dataExts, nomatch = 100L)
                paths0 &lt;- dirname(files)
                paths0 &lt;- factor(paths0, levels = unique(paths0))
                files &lt;- files[order(paths0, o)]
            }
            if (length(files)) {
                for (file in files) {
                  if (verbose)
                    message("name=", name, ":\t file= ...", .Platform$file.sep,
                      basename(file), "::\t", appendLF = FALSE,
                      domain = NA)
                  ext &lt;- fileExt(file)
                  if (basename(file) != paste0(name, ".", ext))
                    found &lt;- FALSE
                  else {
                    found &lt;- TRUE
                    switch(ext, R = , r = {
                      library("utils")
                      sys.source(file, chdir = TRUE, envir = tmp_env)
                    }, RData = , rdata = , rda = load(file, envir = tmp_env),
                      TXT = , txt = , tab = , tab.gz = , tab.bz2 = ,
                      tab.xz = , txt.gz = , txt.bz2 = , txt.xz = assign(name,
                        my_read_table(file, header = TRUE, as.is = FALSE),
                        envir = tmp_env), CSV = , csv = , csv.gz = ,
                      csv.bz2 = , csv.xz = assign(name, my_read_table(file,
                        header = TRUE, sep = ";", as.is = FALSE),
                        envir = tmp_env), found &lt;- FALSE)
                  }
                  if (found)
                    break
                }
                if (verbose)
                  message(if (!found)
                    "*NOT* ", "found", domain = NA)
            }
            if (found)
                break
        }
        if (!found) {
            warning(gettextf("data set %s not found", sQuote(name)),
                domain = NA)
        }
        else if (!overwrite) {
            for (o in ls(envir = tmp_env, all.names = TRUE)) {
                if (exists(o, envir = envir, inherits = FALSE))
                  warning(gettextf("an object named %s already exists and will not be overwritten",
                    sQuote(o)))
                else assign(o, get(o, envir = tmp_env, inherits = FALSE),
                  envir = envir)
            }
            rm(tmp_env)
        }
    }
    invisible(names)
}
&lt;bytecode: 0x558ce91dc068&gt;
&lt;environment: namespace:utils&gt;</code></pre>
</div>
<div id="note-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-1" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p><code>read_csv()</code> assumes that fields are delimited by commas
(since CSV stands for “Comma Separated Values”). However, in several
countries, the comma is used as a decimal separator and the semicolon
(;) is used as a field delimiter. If you want to read in this type of
files in R, you can use the <code>read_csv2</code> function. It behaves
exactly like <code>read_csv</code> but uses different parameters for the
decimal and the field separators. If you are working with another
format, they can be both specified by the user. Check out the help for
<code>read_csv()</code> by typing <code>?read_csv</code> to learn more.
There is also the <code>read_tsv()</code> for tab-separated data files,
and <code>read_delim()</code> allows you to specify more details about
the structure of your file.</p>
</div>
</div>
</div>
<p>When the data is read using <code>read_csv()</code>, it is stored in
an object of class <code>tbl_df</code>, <code>tbl</code>, and
<code>data.frame</code>. You can see the class of an object using:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "function"</code></pre>
</div>
<p>As a <code>tibble</code>, the type of data included in each column is
listed in an abbreviated fashion below the column names. For instance,
here <code>checkin_id</code> is a column of characters
(<code>&lt;chr&gt;</code>),<code>precinct</code> is a column of floating
point numbers (abbreviated <code>&lt;dbl&gt;</code> for the word
‘double’), and the <code>checkin_time</code> is a column in the “date
and time” format (<code>&lt;dttm&gt;</code> or
<code>&lt;S3: POSIXct&gt;</code>).</p>
</section><section><h2 class="section-heading" id="inspecting-tibbles">Inspecting Tibbles<a class="anchor" aria-label="anchor" href="#inspecting-tibbles"></a>
</h2>
<hr class="half-width">
<p>When calling a <code>tbl_df</code> object (like <code>data</code>
here), there is already a lot of information about our tibble being
displayed, such as the number of rows, the number of columns, the names
of the columns, and, as we just saw, the class of data stored in each
column. However, there are functions to extract this information from
tibbles. Here is a non-exhaustive list of some of these functions. Let’s
try them out!</p>
<p>Size:</p>
<ul>
<li>
<code>dim(data)</code> - returns a vector with the number of rows as
the first element, and the number of columns as the second element (the
<strong>dim</strong>ensions of the object)</li>
<li>
<code>nrow(data)</code> - returns the number of rows</li>
<li>
<code>ncol(data)</code> - returns the number of columns</li>
</ul>
<p>Content:</p>
<ul>
<li>
<code>head(data)</code> - shows the first 6 rows</li>
<li>
<code>tail(data)</code> - shows the last 6 rows</li>
</ul>
<p>Names:</p>
<ul>
<li>
<code>names(data)</code> - returns the column names (synonym of
<code>colnames()</code> for <code>data.frame</code> objects)</li>
</ul>
<p>Summary:</p>
<ul>
<li>
<code>str(data)</code> - structure of the object and information
about the class, length and content of each column</li>
<li>
<code>summary(data)</code> - summary statistics for each column</li>
<li>
<code>glimpse(data)</code> - returns the number of columns and rows
of the tibble, the names and class of each column, and previews as many
values will fit on the screen. Unlike the other inspecting functions
listed above, <code>glimpse()</code> is not a “base R” function so you
need to have the <code>dplyr</code> or <code>tibble</code> packages
loaded to be able to execute it.</li>
</ul>
<p>Note: most of these functions are “generic.” They can be used on
other types of objects besides data frames or tibbles.</p>
</section><section><h2 class="section-heading" id="subsetting-tibbles">Subsetting Tibbles<a class="anchor" aria-label="anchor" href="#subsetting-tibbles"></a>
</h2>
<hr class="half-width">
<p>Our <code>data</code> tibble has rows and columns (it has 2
dimensions). In practice, we may not need the entire tibble; for
instance, we may only be interested in a subset of the observations (the
rows) or a particular set of variables (the columns). If we want to
access some specific data from it, we need to specify the “coordinates”
(i.e., indices) we want from it. Row numbers come first, followed by
column numbers.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip</h3>
<div class="callout-content">
<p>Subsetting a <code>tibble</code> with <code>[</code> always results
in a <code>tibble</code>. However, note this is not true in general for
data frames, so be careful! Different ways of specifying these
coordinates can lead to results with different classes. This is covered
in the Software Carpentry lesson <a href="https://swcarpentry.github.io/r-novice-gapminder/" class="external-link">R for
Reproducible Scientific Analysis</a>.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves 1st element of the 1st column of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[1, 1]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st element in the 5th column of the tibble </span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[1, 5]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st column of the tibble as a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[1]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the 1st column of the tibble as a vector</span></span>
<span><span class="co">#we're using head here, as without it, we would print 100,000 entries!</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[[1]]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the first three elements in the 3rd column of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[1:3, 3]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the third row of the tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">3</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[3, ]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#equivalent to head_data &lt;- head(data)</span></span>
<span><span class="va">head_data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[1:6, ]: object of type 'closure' is not subsettable</code></pre>
</div>
<p><code>:</code> is a special function that creates numeric vectors of
integers in increasing or decreasing order, test <code>1:10</code> and
<code>10:1</code> for instance.</p>
<p>You can also exclude certain indices of a tibble using the
“<code>-</code>” sign:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#retrieves the whole tibble (minus the first column)</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[, -1]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#equivalent to head(data)</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">352112</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[-c(7:352112), ]: object of type 'closure' is not subsettable</code></pre>
</div>
<p><code>tibble</code>s can be subset by calling indices (as shown
previously), but also by calling their column names directly:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#returns a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="st">"location"</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a tibble</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="st">"location"</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a vector</span></span>
<span><span class="va">data</span><span class="op">[[</span><span class="st">"location"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#returns a vector</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">location</span></span></code></pre>
</div>
<p>In RStudio, you can use the
<strong><code>auto-completion feature</code></strong> to get the full
and correct names of the columns.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a tibble (<code>data_100</code>) containing only the data in
row 100 of the <code>data</code> data set.</li>
</ol>
<p>Now, continue using <code>data</code> for each of the following
activities:</p>
<ol start="2" style="list-style-type: decimal">
<li>Notice how <code>nrow()</code> gave you the number of rows in the
tibble?</li>
</ol>
<ul>
<li>Use that number to pull out just that last row in the tibble.</li>
<li>Compare that with what you see as the last row using
<code>tail()</code> to make sure it’s meeting expectations.</li>
<li>Pull out that last row using <code>nrow()</code> instead of the row
number.</li>
<li>Create a new tibble (<code>data_last</code>) from that last
row.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>Using the number of rows in the Check-In Dataset that you found
in question 2, extract the rows that are in the middle of the data set.
Store the content of these middle rows in an object named
<code>data_middle</code>. (hint: the middle two items of a set of 4
would be 2 + 3, or visually, [][X][X][])</p></li>
<li><p>Combine <code>nrow()</code> with the <code>-</code> notation
above to reproduce the behavior of <code>head(data)</code>, keeping just
the first through 6th rows of the Check-In Dataset.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 1:</span></span>
<span><span class="va">data_100</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="fl">100</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[100, ]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 2:</span></span>
<span><span class="co">#we save nrows so we can use it multiple times! makes the code cleaner :)</span></span>
<span><span class="va">n_rows</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="va">data_last</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">n_rows</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data[n_rows, ]: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 3:</span></span>
<span><span class="va">data_middle</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">(</span><span class="va">n_rows</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="op">(</span><span class="va">n_rows</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in (n_rows/2):((n_rows/2) + 1): argument of length 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 4:</span></span>
<span><span class="va">data_head</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="va">n_rows</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in 7:n_rows: argument of length 0</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h2>
<hr class="half-width">
<p>R has a special data class, called factors, to deal with categorical
data that you may encounter when creating plots or doing statistical
analyses. Factors are very useful and play a key role in making R
particularly well suited to working with data.</p>
<p>Factors represent categorical data. They are stored as integers
associated with labels, and can be ordered (ordinal) or unordered
(nominal). Factors create a structured relation between the different
levels (values) of a categorical variable, such as days of the week or
responses to a question in a survey. This can make it easier to see how
one element relates to the other elements in a column. While factors
look (and often behave) like character vectors, they are actually
treated as integer vectors by <code>R</code>. So, you need to be very
careful when treating them as strings.</p>
<p>Once created, factors can only contain a pre-defined set of values,
known as <em>levels</em>. By default, R always sorts levels in
alphabetical order. For instance, if you have a factor with 2
levels:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>R will assign <code>1</code> to the level <code>"absentee"</code> and
<code>2</code> to the level <code>"in-person"</code> (because
<code>a</code> comes before <code>i</code>, even though the first
element in this vector is <code>"in-person"</code>). You can see this by
using the function <code>levels()</code> and you can find the number of
levels using <code>nlevels()</code>:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "absentee"  "in-person"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nlevels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>Sometimes, the order of the factors does not matter. Other times you
might want to specify the order because it is meaningful (e.g., “low”,
“medium”, “high”). It may improve your visualization, or it may be
required by a particular type of analysis. Here, one way to reorder our
levels in the <code>ballot_type</code> vector would be:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="co">#current order</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] in-person absentee  in-person in-person absentee
Levels: absentee in-person</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                      levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"absentee"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ballot_type</span> <span class="co">#re-ordered</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] in-person absentee  in-person in-person absentee
Levels: in-person absentee</code></pre>
</div>
<p>In R’s memory, these factors are represented by integers (1, 2), but
are more informative than integers because factors are self describing:
<code>"in-person"</code>, <code>"absentee"</code> is more descriptive
than <code>1</code>, and <code>2</code>. Which one is “absentee”? You
wouldn’t be able to tell just from the integer data. Factors, however,
have this information built in. It is particularly helpful when there
are many levels, and makes renaming levels easier. Let’s say we made a
mistake and need to recode “in-person” to “provisional”. We can do this
using the <code>fct_recode()</code> function from the
<strong><code>forcats</code></strong> package (included in the
<strong><code>tidyverse</code></strong>) – a package that provides some
extra tools to work with factors.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "in-person" "absentee" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span> <span class="op">&lt;-</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                          <span class="st">"provisional"</span> <span class="op">=</span> <span class="st">"in-person"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#alternatively, we could change the "in-person" level directly using the </span></span>
<span><span class="co">#levels() function, but we have to remember that "in-person" is the first level</span></span>
<span><span class="co">#levels(ballot_type)[1] &lt;- "provisional"</span></span>
<span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "provisional" "absentee"   </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] provisional absentee    provisional provisional absentee
Levels: provisional absentee</code></pre>
</div>
<p>So far, your factor is unordered, like a nominal variable. R does not
know the difference between a nominal and an ordinal variable. You make
your factor an ordered factor by using the <code>ordered = TRUE</code>
option inside your factor function. Note how the reported levels changed
from the unordered factor above to the ordered version below. Ordered
levels use the less than sign <code>&lt;</code> to denote level
ranking.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ballot_type_ordered</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballot_type</span>, </span>
<span>                              ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ballot_type_ordered</span> <span class="co">#now ordered</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] provisional absentee    provisional provisional absentee
Levels: provisional &lt; absentee</code></pre>
</div>
<div class="section level3">
<h3 id="converting-factors">Converting Factors<a class="anchor" aria-label="anchor" href="#converting-factors"></a>
</h3>
<p>If you need to convert a factor to a character vector, you use
<code>as.character(x)</code>.</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.character</span><span class="op">(</span><span class="va">ballot_type</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "provisional" "absentee"    "provisional" "provisional" "absentee"   </code></pre>
</div>
<p>Converting factors where the levels appear as numbers (such as
concentration levels, or years) to a numeric vector is a little
trickier. The <code>as.numeric()</code> function returns the index
values of the factor, not its levels, so it will result in an entirely
new (and unwanted in this case) set of numbers. One method to avoid this
is to convert factors to characters, and then to numbers. Another method
is to use the <code>levels()</code> function. Compare:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_fct</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">1990</span>, <span class="fl">1983</span>, <span class="fl">1977</span>, <span class="fl">1998</span>, <span class="fl">1990</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as.numeric</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span>                     <span class="co">#wrong! and with no warning either...</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3 2 1 4 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span><span class="op">)</span>       <span class="co">#technically works...</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1990 1983 1977 1998 1990</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.numeric</span><span class="op">(</span><span class="fu">levels</span><span class="op">(</span><span class="va">year_fct</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="va">year_fct</span><span class="op">]</span>   <span class="co">#recommended methodology! :)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1990 1983 1977 1998 1990</code></pre>
</div>
<p>Notice that in the recommended <code>levels()</code> approach, three
important steps occur:</p>
<ul>
<li>We obtain all the factor levels using
<code>levels(year_fct)</code>
</li>
<li>We convert these levels to numeric values using
<code>as.numeric(levels(year_fct))</code>
</li>
<li>We then access these numeric values using the underlying integers of
the vector <code>year_fct</code> inside the square brackets</li>
</ul>
</div>
<div class="section level3">
<h3 id="renaming-factors">Renaming Factors<a class="anchor" aria-label="anchor" href="#renaming-factors"></a>
</h3>
<p>When your data is stored as a factor, you can use the
<code>plot()</code> function to get a quick glance at the number of
observations represented by each factor level. Let’s create some new
data called <code>ballotData</code>, convert it into a factor, and use
it to look at the number of ballots that are in-person or absentee:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create data</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#convert it into a factor</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#prints out the data (as a vector)</span></span>
<span><span class="va">ballotData</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] in-person in-person in-person in-person in-person in-person in-person
 [8] absentee  absentee  absentee  absentee  absentee  &lt;NA&gt;      &lt;NA&gt;
Levels: absentee in-person</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#bar plot of the number of cases per ballot type:</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-default-order-1.png" alt="Bar plot of Number of Cases per Ballot Type" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Looking at the plot compared to the output of the vector, we can see
that in addition to “absentee”s and “in-person”s, there are some people
for whom their ballot type was not noted. Consequently, these people do
not appear on the plot! Let’s encode them differently so they can be
counted and visualized in our plot.</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#recreates the data</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"in-person"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="st">"absentee"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#replace the missing data with "undetermined"</span></span>
<span><span class="va">ballotData</span><span class="op">[</span><span class="fu">is.na</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"undetermined"</span></span>
<span></span>
<span><span class="co">#convert it into a factor</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#prints out the data (as a vector)</span></span>
<span><span class="va">ballotData</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] in-person    in-person    in-person    in-person    in-person
 [6] in-person    in-person    absentee     absentee     absentee
[11] absentee     absentee     undetermined undetermined
Levels: absentee in-person undetermined</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#bar plot of the number of cases per ballot type:</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-reorder-1.png" alt="Bar plot of Number of Cases per Ballot Type (including missing values)" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Rename the levels of the factor to be in title case:
“Absentee”,“In-Person”, and “Undetermined”.</li>
</ol>
<p>2, Now that we have renamed the factor level to “Undetermined”, can
you recreate the bar plot such that “Undetermined” is first (before
“Absentee”)?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#part 1:</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">ballotData</span>, </span>
<span>                         <span class="st">"Absentee"</span> <span class="op">=</span> <span class="st">"absentee"</span>,</span>
<span>                         <span class="st">"In-Person"</span> <span class="op">=</span> <span class="st">"in-person"</span>, </span>
<span>                         <span class="st">"Undetermined"</span> <span class="op">=</span> <span class="st">"undetermined"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#part 2:</span></span>
<span><span class="va">ballotData</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">ballotData</span>, </span>
<span>                     levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Undetermined"</span>, <span class="st">"Absentee"</span>, <span class="st">"In-Person"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">ballotData</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/02-starting-with-data-rendered-factor-plot-exercise-1.png" alt="Bar plot of Number of Cases per Ballot Type (including missing values)" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="formatting-dates">Formatting Dates<a class="anchor" aria-label="anchor" href="#formatting-dates"></a>
</h2>
<hr class="half-width">
<p>Recall our coverage of dates in “Intro to R”. A best practice for
dealing with date data is to ensure that each component of your date is
available as a separate variable. In our data set, we have a column
<code>checkin_time</code> which contains information about the year,
month, day, hour, minute, and second that the person that submitted the
ballot arrived in the building. Let’s convert those dates into six
separate columns.</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<p>We are going to use the package
<strong><code>lubridate</code></strong>, which is included in the
<strong><code>tidyverse</code></strong> installation and should be
loaded by default. However, if we deal with older versions of tidyverse
(2022 and earlier), we can manually load it by typing
<code><a href="https://lubridate.tidyverse.org" class="external-link">library(lubridate)</a></code>.</p>
<p>If necessary, start by loading the required package:</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span></code></pre>
</div>
<p>The lubridate function <code>ymd_hms()</code> takes a vector
representing year, month, day, hour, minutes, and seconds and converts
it to a <code>Date</code> vector.</p>
<p>Let’s extract our <code>checkin_time</code> column and inspect the
structure:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">times</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">checkin_time</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data$checkin_time: object of type 'closure' is not subsettable</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<p>When we imported the data in R, <code>read_csv()</code> recognized
that this column contained date information. We can now use the
<code>day()</code>, <code>month()</code>, <code>year()</code>,
<code>hour()</code>, <code>minute()</code>, and <code>second()</code>
functions to extract this information from the date, and create new
columns in our tibble to store it:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">day</span> <span class="op">&lt;-</span> <span class="fu">day</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">month</span> <span class="op">&lt;-</span> <span class="fu">month</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu">year</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">hour</span> <span class="op">&lt;-</span> <span class="fu">hour</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">minute</span> <span class="op">&lt;-</span> <span class="fu">minute</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">seconds</span> <span class="op">&lt;-</span> <span class="fu">second</span><span class="op">(</span><span class="va">times</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'times' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (..., list = character(), package = NULL, lib.loc = NULL,
    verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE)
{
    fileExt &lt;- function(x) {
        db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)
        ans &lt;- sub(".*\\.", "", x)
        ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2",
            x[db])
        ans
    }
    my_read_table &lt;- function(...) {
        lcc &lt;- Sys.getlocale("LC_COLLATE")
        on.exit(Sys.setlocale("LC_COLLATE", lcc))
        Sys.setlocale("LC_COLLATE", "C")
        read.table(...)
    }
    stopifnot(is.character(list))
    names &lt;- c(as.character(substitute(list(...))[-1L]), list)
    if (!is.null(package)) {
        if (!is.character(package))
            stop("'package' must be a character vector or NULL")
    }
    paths &lt;- find.package(package, lib.loc, verbose = verbose)
    if (is.null(lib.loc))
        paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(),
            paths)
    paths &lt;- unique(normalizePath(paths[file.exists(paths)]))
    paths &lt;- paths[dir.exists(file.path(paths, "data"))]
    dataExts &lt;- tools:::.make_file_exts("data")
    if (length(names) == 0L) {
        db &lt;- matrix(character(), nrow = 0L, ncol = 4L)
        for (path in paths) {
            entries &lt;- NULL
            packageName &lt;- if (file_test("-f", file.path(path,
                "DESCRIPTION")))
                basename(path)
            else "."
            if (file_test("-f", INDEX &lt;- file.path(path, "Meta",
                "data.rds"))) {
                entries &lt;- readRDS(INDEX)
            }
            else {
                dataDir &lt;- file.path(path, "data")
                entries &lt;- tools::list_files_with_type(dataDir,
                  "data")
                if (length(entries)) {
                  entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))
                  entries &lt;- cbind(entries, "")
                }
            }
            if (NROW(entries)) {
                if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L)
                  db &lt;- rbind(db, cbind(packageName, dirname(path),
                    entries))
                else warning(gettextf("data index for package %s is invalid and will be ignored",
                  sQuote(packageName)), domain = NA, call. = FALSE)
            }
        }
        colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")
        footer &lt;- if (missing(package))
            paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")),
                "\n", "to list the data sets in all *available* packages.")
        else NULL
        y &lt;- list(title = "Data sets", header = NULL, results = db,
            footer = footer)
        class(y) &lt;- "packageIQR"
        return(y)
    }
    paths &lt;- file.path(paths, "data")
    for (name in names) {
        found &lt;- FALSE
        for (p in paths) {
            tmp_env &lt;- if (overwrite)
                envir
            else new.env()
            if (file_test("-f", file.path(p, "Rdata.rds"))) {
                rds &lt;- readRDS(file.path(p, "Rdata.rds"))
                if (name %in% names(rds)) {
                  found &lt;- TRUE
                  if (verbose)
                    message(sprintf("name=%s:\t found in Rdata.rds",
                      name), domain = NA)
                  objs &lt;- rds[[name]]
                  lazyLoad(file.path(p, "Rdata"), envir = tmp_env,
                    filter = function(x) x %in% objs)
                  break
                }
                else if (verbose)
                  message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n",
                    name, paste(names(rds), collapse = ",")),
                    domain = NA)
            }
            files &lt;- list.files(p, full.names = TRUE)
            files &lt;- files[grep(name, files, fixed = TRUE)]
            if (length(files) &gt; 1L) {
                o &lt;- match(fileExt(files), dataExts, nomatch = 100L)
                paths0 &lt;- dirname(files)
                paths0 &lt;- factor(paths0, levels = unique(paths0))
                files &lt;- files[order(paths0, o)]
            }
            if (length(files)) {
                for (file in files) {
                  if (verbose)
                    message("name=", name, ":\t file= ...", .Platform$file.sep,
                      basename(file), "::\t", appendLF = FALSE,
                      domain = NA)
                  ext &lt;- fileExt(file)
                  if (basename(file) != paste0(name, ".", ext))
                    found &lt;- FALSE
                  else {
                    found &lt;- TRUE
                    switch(ext, R = , r = {
                      library("utils")
                      sys.source(file, chdir = TRUE, envir = tmp_env)
                    }, RData = , rdata = , rda = load(file, envir = tmp_env),
                      TXT = , txt = , tab = , tab.gz = , tab.bz2 = ,
                      tab.xz = , txt.gz = , txt.bz2 = , txt.xz = assign(name,
                        my_read_table(file, header = TRUE, as.is = FALSE),
                        envir = tmp_env), CSV = , csv = , csv.gz = ,
                      csv.bz2 = , csv.xz = assign(name, my_read_table(file,
                        header = TRUE, sep = ";", as.is = FALSE),
                        envir = tmp_env), found &lt;- FALSE)
                  }
                  if (found)
                    break
                }
                if (verbose)
                  message(if (!found)
                    "*NOT* ", "found", domain = NA)
            }
            if (found)
                break
        }
        if (!found) {
            warning(gettextf("data set %s not found", sQuote(name)),
                domain = NA)
        }
        else if (!overwrite) {
            for (o in ls(envir = tmp_env, all.names = TRUE)) {
                if (exists(o, envir = envir, inherits = FALSE))
                  warning(gettextf("an object named %s already exists and will not be overwritten",
                    sQuote(o)))
                else assign(o, get(o, envir = tmp_env, inherits = FALSE),
                  envir = envir)
            }
            rm(tmp_env)
        }
    }
    invisible(names)
}
&lt;bytecode: 0x558ce91dc068&gt;
&lt;environment: namespace:utils&gt;</code></pre>
</div>
<p>Notice the six new columns at the end of our tibble.</p>
<p>In our example above, the <code>checkin_time</code> column was read
in correctly as a <code>Date</code> variable but generally that is not
the case. Date columns are often read in as <code>character</code>
variables and, similarly to how you can convert character variables to
dates using the <code>as_date()</code> function, columns can be
converted to the appropriate <code>Date/POSIXct</code>format.</p>
<p>Let’s say we have a generic tibble of IDs and character dates, as
configured:</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"001"</span>, <span class="st">"002"</span>, <span class="st">"003"</span><span class="op">)</span>,</span>
<span>  Date <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"01/05/2025"</span>, <span class="st">"04/23/2024"</span>, <span class="st">"12/25/1987"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  ID    Date
  &lt;chr&gt; &lt;chr&gt;
1 001   01/05/2025
2 002   04/23/2024
3 003   12/25/1987</code></pre>
</div>
<p>As you can see, the <code>Date</code> column is stored as characters.
We can easily convert this to a date type by doing one of the
following:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#option 1: base R (as.Date)</span></span>
<span><span class="va">data2</span><span class="op">$</span><span class="va">Date1</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">Date</span>, format <span class="op">=</span> <span class="st">"%m/%d/%Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#option 2: lubridate (mdy)</span></span>
<span><span class="va">data2</span><span class="op">$</span><span class="va">Date2</span> <span class="op">&lt;-</span> <span class="fu">mdy</span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 4
  ID    Date       Date1      Date2
  &lt;chr&gt; &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;
1 001   01/05/2025 2025-01-05 2025-01-05
2 002   04/23/2024 2024-04-23 2024-04-23
3 003   12/25/1987 1987-12-25 1987-12-25</code></pre>
</div>
<p><code>Date1</code> and <code>Date2</code> store the exact same data!
Lubridate is preferred to base R, but either function can be used.</p>
</section><section><h2 class="section-heading" id="outputting-data">Outputting Data<a class="anchor" aria-label="anchor" href="#outputting-data"></a>
</h2>
<hr class="half-width">
<p>Occasionally, after editing a data set within RStudio, you may want
to output the updated data set to a CSV file. This would allow you to
open the updated information in Excel, Google Sheets, or a different
RMarkdown file!</p>
<p>To output a file to CSV, we will be using the
<code>write_csv()</code> function from the
<strong><code>readr</code></strong> package. Below, we will be
outputting our updated data with our new date and time columns as
<code>"checkin_data_2.csv"</code>:</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#takes the tibble and outputs it as a csv file</span></span>
<span><span class="fu">write_csv</span><span class="op">(</span><span class="va">data</span>, <span class="st">"data/checkin_data_2.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in write_delim(x, file, delim = ",", na = na, append = append, col_names = col_names, : is.data.frame(x) is not TRUE</code></pre>
</div>
<p>When choosing the name for the new file, ensure there are no files
with the same name. By default, <code>write_csv()</code> will overwrite
any files of the same name without a warning!</p>
<p>Additionally, you may have noticed we included the file path when
specifying the name of the new CSV. When creating any sort of new file –
whether that be an image, CSV, or otherwise – R will place the file in
the current working directory! In other words, R will always place new
files in the same folder as the RMarkdown you’re working in, unless
specified otherwise.</p>
<p>Since we have a specific folder (called <code>"data"</code>) to store
our csv files, we specify that we want the new CSV file to go in that
folder by adding <code>"data/"</code> before the file name!</p>
<p>If you want to output your new csv to a different file outside of the
working directory, you can use an entire file path (ex.
<code>"C:/Users/name/Documents/checkin_data_2.csv"</code>) to specify
exactly where you want the file to be saved.</p>
<p>Note: similarly to reading in CSV files,
<strong><code>readr</code></strong> has a alternate version of
<code>write_csv()</code> called <code>write_csv2()</code> that uses
commas as decimal separators and semicolons as field delimiters.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use read_csv to read tabular data in R.</li>
<li>Access rows and columns in a tibble in R.</li>
<li>Use factors to represent categorical data in R.</li>
<li>Use datetime to represent data in R.</li>
<li>Output an updated data set to CSV in R.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-dplyr"><p>Content from <a href="03-dplyr.html">Data Wrangling with dplyr</a></p>
<hr>
<p>Last updated on 2025-11-14 |

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/episodes/03-dplyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I select specific rows and columns from a tibble using
dplyr?</li>
<li>How does the pipe operator <strong><code>(%\&gt;%)</code></strong>
help in combining multiple commands into a single workflow?</li>
<li>What is the advantage of using
<strong><code>mutate()</code></strong> for creating new variables, and
how does it work?</li>
<li>How can I summarize my data by grouping observations and applying
summary statistics with dplyr?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the purpose of the <strong><code>dplyr</code></strong>
package.</li>
<li>Learn how to select specific columns from a tibble using
<strong><code>select</code></strong>.</li>
<li>Learn how to filter rows based on conditions using
<strong><code>filter()</code></strong>.</li>
<li>Use the pipe operator <strong><code>(%\&gt;%)</code></strong> to
seamlessly chain multiple dplyr commands.</li>
<li>Create new columns in a tibble with
<strong><code>mutate()</code></strong>, deriving them from existing
data.</li>
<li>Apply the split-apply-combine strategy using
<strong><code>group_by()</code></strong> and
<strong><code>summarize()</code></strong> to generate summary
statistics.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong><code>dplyr</code></strong> is a powerful and intuitive
package in <strong><code>R</code></strong> designed to make data
manipulation both easy and efficient. It is part of the tidyverse
ecosystem, which emphasizes readable, consistent syntax for working with
data. We’re going to learn some of the most common
<strong><code>dplyr</code></strong> functions:</p>
<ul>
<li>
<code>select()</code>: subset columns</li>
<li>
<code>filter()</code>: subset rows on conditions</li>
<li>
<code>mutate()</code>: create new columns by using information from
other columns</li>
<li>
<code>group_by()</code> and <code>summarize()</code>: create summary
statistics on grouped data</li>
<li>
<code>arrange()</code>: sort results</li>
<li>
<code>count()</code>: count discrete values</li>
</ul>
<p>As covered in “Starting with Data”,
<strong><code>dplyr</code></strong> is also part of the tidyverse and
will be loaded in R’s memory when we call
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>.</p>
<div id="note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note" class="callout-inner">
<h3 class="callout-title">Note</h3>
<div class="callout-content">
<p>The packages in the tidyverse, namely
<strong><code>dplyr</code></strong>, <strong><code>tidyr</code></strong>
and <strong><code>ggplot2</code></strong> accept both the British
(e.g. <em>summarise</em>) and American (e.g. <em>summarize</em>)
spelling variants of different function and option names. For this
lesson, we utilize the American spellings of different functions;
however, feel free to use either whichever variant feels best for
you!</p>
</div>
</div>
</div>
<p>To begin working with <strong><code>dplyr</code></strong>, let’s
start by loading in the packages and data set:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load packages</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in library(here): there is no package called 'here'</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#read in data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in here("data", "checkin_data.csv"): could not find function "here"</code></pre>
</div>
<section><h2 class="section-heading" id="selecting-columns">Selecting Columns<a class="anchor" aria-label="anchor" href="#selecting-columns"></a>
</h2>
<hr class="half-width">
<p>The first function we will be covering is the
<strong><code>select()</code></strong> function! This function allows us
to select specific columns of our data set and accepts two primary types
of arguments: the original data set, and the column(s) to isolate.</p>
<p>In our case, for example, we are interested in seeing ONLY the
precinct id’s in our data set, so our arguments will be
<code>data</code> and <code>precinct</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects JUST the precinct column</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("select"): no applicable method for 'select' applied to an object of class "function"</code></pre>
</div>
<p>Using the <strong><code>select</code></strong> function, you can also
select MULTIPLE columns. This can be particularly helpful with larger
data sets. Theoretically, this function can be performed using
subsetting instead of the <strong><code>select</code></strong> function,
but it’s best practice to use dplyr functions when possible:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects the precinct column AND the checkin_time column</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("select"): no applicable method for 'select' applied to an object of class "function"</code></pre>
</div>
<p>In some cases, you may want to select multiple, adjacent columns.
Instead of writing out each individual column name directly, they can be
selected with a <strong><code>:</code></strong>, as seen below:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#selects all columns from checkin_time to precinct</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">data</span>, <span class="va">checkin_time</span><span class="op">:</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("select"): no applicable method for 'select' applied to an object of class "function"</code></pre>
</div>
<p>You can see a visualized example of the
<strong><code>select()</code></strong> function on <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20island,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</section><section><h2 class="section-heading" id="filtering-rows">Filtering Rows<a class="anchor" aria-label="anchor" href="#filtering-rows"></a>
</h2>
<hr class="half-width">
<p>Our next function we will be covering is the
<strong><code>filter()</code></strong> function! This function allows us
to choose rows based on specific criteria, and accepts two arguments:
the original data set, and the condition to select the rows based off
of. In this case, we ONLY want rows where the precinct is
“PRECINCT_001”:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows where the precinct is "PRECINCT_001"</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>You can also use comparison operators within
<strong><code>filter()</code></strong> arguments! This includes
less-than (&lt;), less-than or equal-to (&lt;=), greater-than (&gt;),
greater-than or equal-to (&gt;=), or not-equal-to (!=).</p>
<p>For example, you could filter for all rows where the check-in length
is less-than or equal-to 20 seconds:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "less-than or equal-to"/"&lt;=" operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">checkin_length</span> <span class="op">&lt;=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>Similarly to the <strong><code>select()</code></strong> function, the
<strong><code>filter()</code></strong> function also allows us to
specify multiple conditions. However, instead of splitting these by
commas, conditions are combined using ‘and’, ‘or’, or comparison
statements.</p>
<p>In an ‘and’ statement, an observation (row) must meet <em>all</em>
criteria to be included in the resulting tibble. To form ‘and’
statements within dplyr, we can pass our desired conditions as arguments
in the <strong><code>filter()</code></strong> function, separated by an
ampersand (&amp;).</p>
<p>Below, let’s filter rows that include “PRECINCT_001” as the precinct
<em>and</em> “DEVICE_002” as the device:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "and"/"&amp;" logical operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span> <span class="op">&amp;</span> <span class="va">device</span> <span class="op">==</span> <span class="st">"DEVICE_002"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>In an ‘or’ statement, an observation (row) must meet <em>at least
one</em> criteria to be included in the resulting tibble. To form ‘or’
statements within dplyr, we can pass our desired conditions as arguments
in the <strong><code>filter()</code></strong> function, separated by a
vertical bar (|).</p>
<p>Below, let’s filter rows that include “PRECINCT_001” <em>or</em>
“PRECINCT_002” as the precinct:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#filters rows with the "or"/"|" logical operator</span></span>
<span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_001"</span> <span class="op">|</span> <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_002"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>you can see a visualized examples of the
<strong><code>filter()</code></strong> function on <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20filter%28bill_length_mm%20%3E%2045%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</section><section><h2 class="section-heading" id="using-pipes">Using Pipes<a class="anchor" aria-label="anchor" href="#using-pipes"></a>
</h2>
<hr class="half-width">
<p>In many cases, you will want to apply multiple functions at the same
time! Within dplyr, there are three ways to do this.</p>
<ol style="list-style-type: decimal">
<li>Intermediate Steps: Using this method, you apply the first function
to your data and save the result as a new object. After saving, the
second function is applied to your new object instead of the original
data. While this method is easy to understand, it can create many extra,
unnecessary objects in your R environment.</li>
</ol>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#step 1: apply filter function and save it to a new object (filtered_data)</span></span>
<span><span class="va">filtered_data</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#step 2: apply select function on the filtered_data object</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">filtered_data</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'filtered_data' not found</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Nested Functions: Instead of saving intermediate results, you can
instead put your first function inside the second. This is called
nesting, and, while it works, can become confusing if more than two
functions are put together.</li>
</ol>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Do it all in one go, nesting the functions</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="fu">filter</span><span class="op">(</span><span class="va">data</span>, <span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span>, <span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Using Pipes: <strong><code>Pipes</code></strong> allow you to
connect your commands in a simple, step-by-step way. These let you take
the output of one function and send it directly to the next, which is
useful when you need to do many things to the same data set! When
analyzing code with pipes, you can think of it as the word “then”.</li>
</ol>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#takes the data THEN applies the filter function THEN applies the select function</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_005"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">checkin_time</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>In the above code, you may have noticed that the <code>data</code>
data set was not included as an argument in either of the functions.
Since pipes take the object on its left and pass it as the first
argument to the function on its right, we don’t need to explicitly
include the tibble as an argument to the <code>filter()</code> and
<code>select()</code> functions anymore.</p>
<p>In R, there are two main types of pipe operators: 1.
<strong><code>|&gt;</code></strong>: called the <em>native</em> pipe —
included with base <strong><code>R</code></strong>. 2.
<strong><code>%&gt;%</code></strong>: called the <em>magrittr</em> pipe
— installed automatically with <strong><code>dplyr</code></strong>. This
pipe is the most common, and what we will be using throughout this
lesson.</p>
<p>Both pipes behave the exact same way, so the choice of which one to
use is a matter of taste.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using pipes, filter the <code>data</code> data set to include only
observations where the <code>device</code> is <code>"DEVICE_738"</code>
select only the columns <code>precinct</code>,
<code>checkin_time</code>, and <code>device</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">device</span> <span class="op">==</span> <span class="st">"DEVICE_738"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">checkin_time</span>, <span class="va">device</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="split-apply-combine-data-analysis">Split-Apply-Combine Data Analysis<a class="anchor" aria-label="anchor" href="#split-apply-combine-data-analysis"></a>
</h2>
<hr class="half-width">
<p>Many data analysis tasks follow a pattern known as
<em>split-apply-combine</em>: 1. <strong>Split</strong> the data into
groups. 2. <strong>Apply</strong> some analysis or calculation to each
group. 3. <strong>Combine</strong> the results into a summary</p>
<p>The <strong><code>dplyr</code></strong> package makes this easy with
two main functions: - <code>group_by()</code> to define how you want to
split the data. - <code>summarize()</code> to apply one or more
calculations on each group and return a summary.</p>
<div class="section level3">
<h3 id="group_by">
<code>group_by()</code><a class="anchor" aria-label="anchor" href="#group_by"></a>
</h3>
<p>The <strong>`<code>group_by()</code></strong> function allows us to
treat parts of our data set as separate groups so other functions can
work within each group instead of on the entire data set. This function
accepts the one or more columns to group-by as arguments!</p>
<p>Below, we will be grouping the data by location, and filtering the
rows to only include the check-in(s) with the longest check-in length
for each location:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#groups the data by location and applies filter</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>Additionally, when multiple columns are provided,
<strong>`<code>group_by()</code></strong> goes from left-to-right,
grouping by the first column, then within each group by the second, and
so on!</p>
<p>Below, we will be doing the same calculation that we did above, but
instead of grouping only by location, we will be grouping by location
<em>and</em> device:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#groups the data by location and applies filter</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>As you can see, there are additional rows, since we are looking at
the longest check-in times for each device within each location, instead
of just within each location!</p>
<p>After completing analysis, you may want to remove grouping! To do so,
you can use the <strong><code>ungroup()</code></strong> function:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">location</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>The final table will no longer be considered “grouped”, which can be
helpful if you plan to do further operations that don’t rely on
grouping.</p>
</div>
<div class="section level3">
<h3 id="summarize">
<code>summarize()</code><a class="anchor" aria-label="anchor" href="#summarize"></a>
</h3>
<p>The
<strong><code>summarize()`** function is often used alongside **</code>group_by()`</strong>,
as it allows us to reduce a group of rows to a single row per group.
This function accepts one or more expressions that compute summary
statistics as arguments!</p>
<p>Some common <strong>`<code>summarize()</code></strong> summary
functions include: - mean(): calculates the average of a numeric column
- max()/min(): returns the maximum or minimum of a group - n(): counts
the number of rows in a group - n_distinct(): counts the number of
unique values in a column</p>
<p>Suppose we want to see how many total check-ins there were for each
precinct in our data set. We can do this by grouping the data by the
<code>precinct</code> column using
<strong><code>group_by()`** and then using the **</code>summarize()`</strong>
function to count each row within each precinct group, as seen
below:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>We can also apply <strong>`<code>summarize()</code></strong> on data
that has been grouped by multiple columns! Below, we will be grouping by
precinct and device, allowing us to see how many check-ins occurred for
each device within each precinct:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span>, <span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>You’re not limited to a single summary statistic, either! For
example, you might want both the total number of check-ins <em>and</em>
the number of unique devices for each precinct. You can combine these in
one <strong><code>summarize()</code></strong> call:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span></span>
<span>    total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    unique_devices <span class="op">=</span> <span class="fu">n_distinct</span><span class="op">(</span><span class="va">device</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>Additionally, if you need to exclude certain rows before summarizing,
ensure you use <strong><code>filter()</code></strong> before grouping.
For example, to include only check-ins from a specific location, you can
do the following:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">==</span> <span class="st">"LOCATION_001"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>Additional examples of the <strong><code>group_by()</code></strong>
and <strong><code>summarize()</code></strong> functions can be found at
<a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20summarise%28Avg_Bill_Length%20%3D%20mean%28bill_length_mm%29%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
</div>
<div class="section level3">
<h3 id="arrange">
<code>arrange()</code><a class="anchor" aria-label="anchor" href="#arrange"></a>
</h3>
<p>After summarizing, you may want to sort your results. To do so, you
can use the <strong><code>arrange()</code></strong> function to reorder
rows. For example, to list precincts from lowest to highest check-in
counts, you can do the following:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("group_by"): no applicable method for 'group_by' applied to an object of class "function"</code></pre>
</div>
<p>Or, to instead arrange from highest to lowest, include desc() around
the <strong><code>arrange()</code></strong> attribute, as seen below: #
<code>{r arrange-desc, purl=FALSE} data %&gt;%   group_by(precinct) %&gt;%   summarize(total_checkins = n()) %&gt;%   arrange(desc(total_checkins))</code></p>
<p>An additional example of the <strong><code>arrange()</code></strong>
function can be found <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28species,%20bill_length_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20arrange%28bill_length_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">at
tidy data tutor</a></p>
</div>
<div class="section level3">
<h3 id="count">
<code>count()</code><a class="anchor" aria-label="anchor" href="#count"></a>
</h3>
<p>When working with data, we often want to know how many observations
we have for each factor or combination of factors. As you saw above, we
were able to complete this using the
<strong><code>group_by()</code></strong> function, followed by the
<strong><code>summarize()</code></strong> function.</p>
<p>However, since this is such a common task,
<strong><code>dplyr</code></strong> provides the
<strong><code>count()</code></strong> function to make this task much
quicker and easier to write and perform!</p>
<p>For example, if we want to count the number of check-ins for each
precinct, instead of grouping by precinct and summarizing using the
<code>n()</code> function, we can do the following:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<p>Additionally, if you’d like your results sorted, instead of using the
<strong><code>arrange()</code></strong> function, you can add “sort =
TRUE” as an argument to the <strong><code>count()</code></strong>
function, as seen below:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">precinct</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using what you’ve learned above, determine how many check-ins were
recorded for each device. Which device had the highest number of
check-ins?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">device</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<p>“DEVICE_255” has the highest number of check ins, with 898
recorded!</p>
</div>
</div>
</div>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>For “PRECINCT_007”, find the device that recorded the least amount of
check-ins.</p>
<p><strong>Hint:</strong> ensure you filter your data before applying
split-apply-combine!</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">==</span> <span class="st">"PRECINCT_007"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">device</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>“DEVICE_009” had the least amount of check-ins, recording only 1.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="mutating-data">Mutating Data<a class="anchor" aria-label="anchor" href="#mutating-data"></a>
</h2>
<hr class="half-width">
<p>Sometimes, you may want to create new columns based on values in
existing columns. For example, if you have a column represented in
seconds, and you might want to add a new column with the same
information, but represented as minutes instead.</p>
<p>To complete this, we use the <strong>`<code>mutate()</code></strong>
function. This function allows us to create new columns OR modify
existing columns by applying operations to each row of the data set!</p>
<p>For example, let’s say that we want to create a new column that, as
mentioned above, converts the <code>checkin_length</code> column (which
is in seconds) into minutes by dividing each value by 60. Below, we can
use the mutate function to add this column to our data:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>checkin_length_min <span class="op">=</span> <span class="va">checkin_length</span> <span class="op">/</span> <span class="fl">60</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("mutate"): no applicable method for 'mutate' applied to an object of class "function"</code></pre>
</div>
<p>Admittedly, this operation doesn’t tell us anything additional about
our data, as it only converts part of our data into a different format.
But, with a more complex operation we could, for example, add a column
that says whether a check-in length is “abnormal” or not!</p>
<p>For the sake of the example, let’s say that any check-in length
greater-than or equal-to 200 seconds is abnormal:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>checkin_category <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">checkin_length</span> <span class="op">&gt;=</span> <span class="fl">200</span>, <span class="st">"abnormal"</span>, <span class="st">"normal"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("mutate"): no applicable method for 'mutate' applied to an object of class "function"</code></pre>
</div>
<p>This code filters out duplicate entries, showing just one record for
each unique precinct and the new column we just added.</p>
<p>Additional examples of the <strong><code>mutate()</code></strong>
function can be found at <a href="https://tidydatatutor.com/vis.html#code=library%28dplyr%29%0Alibrary%28palmerpenguins%29%0A%0Aset.seed%282021-12-03%29%0A%0Asample_penguins%20%3C-%20penguins%20%25%3E%25%0A%20%20group_by%28species%29%20%25%3E%25%20%0A%20%20sample_n%283%29%20%25%3E%25%20%0A%20%20select%28bill_length_mm,%20bill_depth_mm%29%20%25%3E%25%20%0A%20%20ungroup%28%29%20%25%3E%25%0A%20%20select%28bill_length_mm,%20bill_depth_mm%29%0A%0Asample_penguins%20%25%3E%25%20%0A%20%20mutate%28bill_volume%20%3D%20bill_length_mm%20*%20bill_depth_mm%29&amp;d=2025-04-18&amp;lang=r&amp;v=v1" class="external-link">tidy
data tutor</a></p>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Using what you’ve learned throughout this lesson, create a tibble
called “avg_checkins” that meets the following criteria: 1. Includes
only precincts from “PRECINCT_001” to “PRECINCT_035”. 2. Removes the
“PRECINCT_0” prefix from the precinct names and converts each precinct
name to a numeric value. 3. Calculates the average check-in length for
each precinct, ensuring this column is named “avg_checkin_length”. 4.
Contains two columns: “precinct” and “avg_checkin_length”. 5. Sorts the
tibble by precinct (1 to 35).</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_checkins</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>precinct <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">str_remove</span><span class="op">(</span><span class="va">precinct</span>, <span class="st">"PRECINCT_0"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">precinct</span> <span class="op">&gt;=</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">precinct</span> <span class="op">&lt;=</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>avg_checkin_length <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">checkin_length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">precinct</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("mutate"): no applicable method for 'mutate' applied to an object of class "function"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Save your new “avg_checkins” into your data folder as
“avg_checkins.csv”!</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_csv</span><span class="op">(</span><span class="va">avg_checkins</span>, <span class="st">"data/avg_checkins.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'avg_checkins' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use the <code>dplyr</code> package to manipulate tibbles.</li>
<li>Use <code>select()</code> to choose variables from a tibble.</li>
<li>Use <code>filter()</code> to choose data based on values.</li>
<li>Use <code>group_by()</code> and <code>summarize()</code> to work
with subsets of data.</li>
<li>Use <code>mutate()</code> to create new variables.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-tidyr"><p>Content from <a href="04-tidyr.html">Data Wrangling with tidyr</a></p>
<hr>
<p>Last updated on 2025-11-14 |

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/episodes/04-tidyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I reformat a tibble to meet my needs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the concept of a wide and a long table format and for which
purpose those formats are useful.</li>
<li>Describe the roles of variable names and their associated values
when a table is reshaped.</li>
<li>Reshape a tibble from long to wide format and back with the
<code>pivot_wider</code> and <code>pivot_longer</code> commands from the
<strong><code>tidyr</code></strong> package.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong><code>dplyr</code></strong> pairs nicely with
<strong><code>tidyr</code></strong>, a package that enables you to
swiftly convert between different data formats (long vs. wide) for
plotting and analysis. To learn more about
<strong><code>tidyr</code></strong> after the workshop, you may want to
check out this <a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf" class="external-link">handy
data tidying with <strong><code>tidyr</code></strong>
cheatsheet</a>.</p>
<p>To make sure everyone will use the same data sets for this lesson,
we’ll be reading in the updated version of the Check-In Dataset (as
created in “Starting With Data”), as well as the Messy Dataset (which we
will cover at the end of this lesson).</p>
<section><h2 class="section-heading" id="reading-in-data">Reading in Data<a class="anchor" aria-label="anchor" href="#reading-in-data"></a>
</h2>
<hr class="half-width">
<p>To start, we will load in the <strong><code>tidyverse</code></strong>
and <strong><code>here</code></strong> packages so we can read in our
CSV files.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">here</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in library(here): there is no package called 'here'</code></pre>
</div>
<p>Next, we will read in the Check-In Data:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"checkin_data_2.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in here("data", "checkin_data_2.csv"): could not find function "here"</code></pre>
</div>
</section><section><h2 class="section-heading" id="reshaping-with-pivot_wider-and-pivot_longer">Reshaping with pivot_wider() and pivot_longer()<a class="anchor" aria-label="anchor" href="#reshaping-with-pivot_wider-and-pivot_longer"></a>
</h2>
<hr class="half-width">
<p>There are essentially three rules that define a “tidy” data set:</p>
<ol style="list-style-type: decimal">
<li>Each variable has its own column</li>
<li>Each observation has its own row</li>
<li>Each value must have its own cell</li>
</ol>
<p>This graphic visually represents the three rules that define a “tidy”
data set:</p>
<p><img src="fig/tidy-data-wickham.png" alt="A visual representation of the three rules that define a 'tidy' data set." class="figure"><em>R for Data Science</em>, Wickham H and Grolemund G (<a href="https://r4ds.had.co.nz/index.html" class="external-link">https://r4ds.had.co.nz/index.html</a>)
© Wickham, Grolemund 2017 This image is licensed under
Attribution-NonCommercial-NoDerivs 3.0 United States (CC-BY-NC-ND 3.0
US)</p>
<p>In this section we will explore how these rules are linked to the
different data formats researchers are often interested in: “wide” and
“long”. This tutorial will help you efficiently transform your data
shape, regardless of its original format.</p>
<p>First, we will explore qualities of the <code>data</code> data and
how they relate to these different types of data formats.</p>
<div class="section level3">
<h3 id="long-and-wide-data-formats">Long and Wide Data Formats<a class="anchor" aria-label="anchor" href="#long-and-wide-data-formats"></a>
</h3>
<p>In <code>data</code>, each row contains the values of variables
associated with each record collected (each ballot instance). As you may
recall from “Starting With Data”, it was stated that the
<code>checkin_id</code> was added to provide a “unique key/ID” for each
individual ballot.</p>
<p>Since <code>checkin_id</code> is unique to each instance, we can use
this variable as an identifier corresponding to each of the 352112
observations.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">checkin_id</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">distinct</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">nrow</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("select"): no applicable method for 'select' applied to an object of class "function"</code></pre>
</div>
<p>As seen in the code below, for each check-in time corresponding to
each device, no two <code>checkin_id</code>s are the same. Thus, this
format is what we call a “long” data format, where each observation
occupies only one row in the tibble.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">location</span> <span class="op">==</span> <span class="st">"LOCATION_001"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">checkin_id</span>, <span class="va">checkin_time</span>, <span class="va">location</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">sample_n</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("filter"): no applicable method for 'filter' applied to an object of class "function"</code></pre>
</div>
<p>If you were to look at the entire <code>data</code> data set, you
would notice that the layout/format of the data adheres to rules 1-3,
where:</p>
<ol style="list-style-type: decimal">
<li>each column is a variable</li>
<li>each row is an observation</li>
<li>each value has its own cell</li>
</ol>
<p>As mentioned above, this is called a “long” data format.
Additionally, you may notice that each column represents a different
variable. In the “longest” data format there would only be three
columns, one for the id variable, one for the observed variable, and one
for the observed value (of that variable). This data format is quite
unsightly and difficult to work with, so you will rarely see it in
use.</p>
<p>Alternatively, in a “wide” data format we see modifications to rule
1, where each column no longer represents a single variable. Instead,
columns can represent different levels/values of a variable. For
instance, in some data you encounter, the researchers may have chosen
for every check-in hour to be a different column.</p>
<p>These may sound like dramatically different data layouts, but there
are some tools that make transitions between these layouts much simpler
than you might think! The GIF below shows how these two formats relate
to each other, and gives you an idea of how we can use R to shift from
one format to the other.</p>
<figure><img src="fig/tidyr-pivot_wider_longer.gif" alt="A gif showing how long and wide tibble layouts relate to each other." class="figure mx-auto d-block"><div class="figcaption">Animation showing pivot_wider and pivot_longer
functions transforming data between long and wide formats</div>
</figure><p>Long and wide tibble layouts mainly affect readability. You may find
that visually you may prefer the “wide” format, since you can see more
of the data on the screen. However, all of the R functions we have used
thus far expect for your data to be in a “long” data format. This is
because the long format is more machine readable and is closer to the
formatting of databases.</p>
</div>
<div class="section level3">
<h3 id="questions-that-warrant-different-data-formats">Questions That Warrant Different Data Formats<a class="anchor" aria-label="anchor" href="#questions-that-warrant-different-data-formats"></a>
</h3>
<p>In <code>data</code>, each row contains values associated with each
record (the unit). This may include values such as the ID of the ballot
box, the ballot box’s location, the precinct the ballot box belongs to,
or the arrival time of the person submitting the ballot. This format
allows for us to make comparisons across individual ballot
instances!</p>
<p>However, what if we wanted to look at how many check-ins occurred
each hour in regards to each polling location?</p>
<p>To facilitate this comparison, we would need to create a new table
where each row (the unit) represents a polling location (associated with
the <code>location</code> column), each column (after the first)
represents an hour of the day (associated with the <code>hour</code>
column), and the values of each row containing the number of check-ins
recorded at that location during that hour.</p>
<p>Once we we’ve created this new table, we can explore the
relationships within and between locations. The key point here is that
we are still following a tidy data structure, but we have
<strong>reshaped</strong> the data according to the observations of
interest.</p>
<p>Alternatively, let’s say the check-in times were originally spread
across multiple columns, and we were interested in visualizing, across
multiple locations, how check-in activity has changed over the course of
the day. This would require the check-in time to be included in a single
column rather than spread across multiple columns. Thus, we would need
to transform the column names into the values of a variable.</p>
<p>We can do both of these transformations with two
<strong><code>tidyr</code></strong> functions,
<code>pivot_wider()</code> and <code>pivot_longer()</code>.</p>
</div>
</section><section><h2 class="section-heading" id="pivoting-wider">Pivoting Wider<a class="anchor" aria-label="anchor" href="#pivoting-wider"></a>
</h2>
<hr class="half-width">
<p><code>pivot_wider()</code> takes in three principal arguments:</p>
<ol style="list-style-type: decimal">
<li>the data to be transformed</li>
<li>the <em>names_from</em> column variable (whose values will become
new column names).</li>
<li>the <em>values_from</em> column variable (whose values will fill the
new column variables).</li>
</ol>
<p>Further arguments include <code>values_fill</code> which, if set,
fills in missing values with the value provided, and
<code>names_sort</code>, which, if set, sorts the columns in
alphanumerical order.</p>
<p>Let’s use <code>pivot_wider()</code> to transform <code>data</code>
to create new columns for each hour represented within the data.</p>
<p>To help with understanding, we will be walking through the
transformation line-by-line.</p>
<p>First we create a new object (<code>data_tc</code>) based on the
<code>data</code> tibble:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>data_tc <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span></code></pre>
</div>
<p>Our next step will be to get the values for each cell, so we will be
using the <code>count()</code> function from the
<strong><code>dplyr</code></strong> package. This is completed in the
next line, grouping by <code>location</code> and <code>hour</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">count</span>(location, hour) <span class="sc">%&gt;%</span></span></code></pre>
</div>
<p>Finally, we will be creating and populating the new, “wide” data
using the counts and the column values! This can be seen below:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Now that we understand what’s going on, let’s combine all those
chunks together and look at what our completed tibble looks like!</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create the object</span></span>
<span><span class="va">data_tc</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#get the values</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot the data</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>Oh no! It looks like the hours columns are out of order, with 6
sitting between 19 and 20. If we were to perform data analysis, this
would not matter, but visually, this can be confusing or misleading,
since we expect time to move from left to right in ascending order.</p>
<p>In order to fix this, we can add the aforementioned
<code>names_sort</code> argument to the function to specify that the
columns should be in order. This line has been added to the code block
below:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#create the object</span></span>
<span><span class="va">data_tc</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#get the values</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot the data</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>  names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>  values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>  values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  names_sort <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#sorts the columns from left to right</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>As seen by the outputted tibble above, the hour columns now appear in
ascending order, making the table far easier to interpret at a
glance!</p>
<p>Now that we’ve used <code>pivot_wider()</code> to make our data
“wide”, let’s take a closer look at the resulting <code>data_tc</code>
tibble to gain a better understanding.</p>
<p>First, let’s check the dimensions:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>As we can see, there are 417 rows and 16 columns! Each row represents
a unique location within the data set. We can verify this by counting
the number of unique location values within <code>data</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">location</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data$location: object of type 'closure' is not subsettable</code></pre>
</div>
<p>This also returns 417, confirming that each row corresponds to a
single, unique location within the data.</p>
<p>Next, let’s look at the 16 columns of the tibble:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colnames</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>Notice there is no longer a column titled <code>hour</code>. This is
because the <code>pivot_wider()</code> function, by default, removes the
original column that the new column values were taken from. In this
case, the values from the original <code>hour</code> column have now
become columns with names that range from 6 to 20, representing the
hours from 6AM to 8PM, and thus the <code>hour</code> column has been
dropped.</p>
<p>This new format of the data allows us to do interesting things, like
make a table showing the number of check-ins across all locations at a
particular time, with the rows being ordered from highest to lowest in
terms of count:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">location</span>, <span class="va">`7`</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">`7`</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>Or, we can calculate the total amount of check-ins for each location
across all hours, and sort the data to determine which location had the
least check-ins:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="va">data_tc</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">location</span>, <span class="va">total_checkins</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">total_checkins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>We created <code>data_tc</code> by reshaping the data. Replicate this
process to create a tibble named <code>data_total</code> that shows the
total number of check-ins for each hour, across all locations.</p>
<p>The resulting tibble should have columns for each hour, sorted from
earliest to latest similarly to the <code>data_tc</code> tibble. There
should only be one row, representative of all locations, and an extra
summary column, called <code>total_checkins</code>, that calculates the
total number of check ins across the entire <code>data</code> data
set.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>    values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    names_sort <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_total' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#alternative solution:</span></span>
<span><span class="va">data_total_2</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">hour</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">n</span>,</span>
<span>    values_fill <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    names_sort <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("count"): no applicable method for 'count' applied to an object of class "function"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total_2</span> <span class="op">&lt;-</span> <span class="va">data_total_2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>total_checkins <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="va">data_total_2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_total_2' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total_2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_total_2' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="pivoting-longer">Pivoting Longer<a class="anchor" aria-label="anchor" href="#pivoting-longer"></a>
</h2>
<hr class="half-width">
<p>The opposing situation could occur if we had been provided with the
<code>data_tc</code> tibble, but instead of treating each hour as an
individual column, we instead wish to treat them as values of a variable
instead.</p>
<p>In this situation, we are gathering all of these columns and turning
them into a pair of new variables. One variable will include the column
names as values (<code>checkin_hour</code>), and the other will contain
the values in each cell previously associated with the column names
(<code>checkin_count</code>)!</p>
<p><code>pivot_longer()</code> takes four principal arguments:</p>
<ol style="list-style-type: decimal">
<li>the data to be transformed</li>
<li>the names of the columns we use to fill the a new values variable
(or to drop), referred to as <em>cols</em>.</li>
<li>the <em>names_to</em> column variable we wish to create from the
<em>cols</em> provided.</li>
<li>the <em>values_to</em> column variable we wish to create and fill
with values associated with the <em>cols</em> provided.</li>
</ol>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tc_long</span> <span class="op">&lt;-</span> <span class="va">data_tc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">`6`</span><span class="op">:</span><span class="va">`20`</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"checkin_hour"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"checkin_count"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<p>Below, we will look at the two tibbles and compare their
structures:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">data_tc_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_tc_long' not found</code></pre>
</div>
<p>As you can see, the hours and their corresponding counts for each
location are now separated into individual rows! Each location appears
multiple times – once for every hour – rather than appearing just once,
as in a wide-table format.</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>In the last exercise, you created the wide tibble,
<code>data_total</code>. In this exercise, your goal is to reverse this
transformation using <code>pivot_longer()</code>.</p>
<p>Create a tibble called <code>data_total_long</code> that has two
columns: one for the hour, and one for the corresponding check-in count.
During your transformation, remove the <code>total_checkins</code>
column.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total_long</span> <span class="op">&lt;-</span> <span class="va">data_total</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">total_checkins</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"checkin_count"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_total' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_total_long</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'data_total_long' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-useful-tidyr-functions">Other Useful tidyr Functions<a class="anchor" aria-label="anchor" href="#other-useful-tidyr-functions"></a>
</h2>
<hr class="half-width">
<p>Throughout this lesson, we used only a portion of the commands that
<strong><code>tidyr</code></strong> offers for data transformation.
Below, we will be briefly covering some other functions that may prove
useful throughout your future analyses (you can refer to the
<strong><code>tidyr</code></strong> cheat sheet linked at the beginning
of the lesson for more in-depth explanations):</p>
<ol style="list-style-type: decimal">
<li>
<code>separate_longer_delim()</code> – splits one column into many
rows, based on a delimiter.</li>
</ol>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>location <span class="op">=</span> <span class="st">"1"</span>, count <span class="op">=</span> <span class="st">"1,2,3"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">separate_longer_delim</span><span class="op">(</span><span class="va">count</span>, delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  location count
  &lt;chr&gt;    &lt;chr&gt;
1 1        1
2 1        2
3 1        3    </code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>
<code>separate_wider_delim()</code> – splits one column into
multiple columns, based on a delimiter.</li>
</ol>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>date <span class="op">=</span> <span class="st">"01/01/2025"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">separate_wider_delim</span><span class="op">(</span><span class="va">date</span>, delim <span class="op">=</span> <span class="st">"/"</span>, names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 3
  month day   year
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 01    01    2025 </code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>
<code>unite()</code> – combines multiple columns into one.</li>
</ol>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>city <span class="op">=</span> <span class="st">"Providence"</span>, state <span class="op">=</span> <span class="st">"RI"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unite</span><span class="op">(</span><span class="st">"location"</span>, <span class="va">city</span>, <span class="va">state</span>, sep <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 1
  location
  &lt;chr&gt;
1 Providence, RI</code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>
<code>replace_na()</code> – fills in missing values
(<code>NA</code>) with a value of choice. The replacement must be in a
list.</li>
</ol>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">replace_na</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>count <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     2
3     3</code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>
<code>drop_na()</code> – removes rows that contain missing values
(<code>NA</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 1
  count
  &lt;dbl&gt;
1     1
2     3</code></pre>
</div>
<ol start="6" style="list-style-type: decimal">
<li>
<code>fill()</code> – fills in missing values (<code>NA</code>) with
the value either above (.direction = “down”) or below (.direction =
“up”) it.</li>
</ol>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#below</span></span>
<span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">fill</span><span class="op">(</span><span class="va">count</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     3
3     3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#above</span></span>
<span><span class="fu">tibble</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">fill</span><span class="op">(</span><span class="va">count</span>, .direction <span class="op">=</span> <span class="st">"down"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 1
  count
  &lt;dbl&gt;
1     1
2     1
3     3</code></pre>
</div>
<ol start="7" style="list-style-type: decimal">
<li>
<code>complete()</code> – fills in all combinations of variables
that could exist, but don’t within the inputted data.</li>
</ol>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span>location <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span>, hour <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">complete</span><span class="op">(</span><span class="va">location</span>, <span class="va">hour</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 2
  location  hour
  &lt;chr&gt;    &lt;dbl&gt;
1 A            1
2 A            2
3 A            3
4 B            1
5 B            2
6 B            3</code></pre>
</div>
</section><section><h2 class="section-heading" id="applying-what-we-learned-to-clean-data">Applying What We Learned to Clean Data<a class="anchor" aria-label="anchor" href="#applying-what-we-learned-to-clean-data"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="introduction-to-the-messy-dataset">Introduction to the Messy Dataset<a class="anchor" aria-label="anchor" href="#introduction-to-the-messy-dataset"></a>
</h3>
<p>The Messy Dataset is an example of a “messy” data set that tracks
when people check-in to a voting location! In the context of the data
set, labels (“provisional”, “assistance”, and “provisional and
assistance”) are used to explain why check-in times may be longer than
average. If a check-in does not have a label, assistance was not needed,
and the check-in can be considered “normal”. Within this data set,
missing data is encoded as “NULL”.</p>
<p>The following is a visual representation of the data set’s
columns:</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="74%">
</colgroup>
<thead><tr>
<th>column_name</th>
<th>description</th>
</tr></thead>
<tbody>
<tr>
<td>CheckIn_Duration_Provisional</td>
<td>Includes check-ins that fall under the “Provisional” label.</td>
</tr>
<tr>
<td>CheckIn_Duration_Assistance</td>
<td>Includes check-ins that fall under the “Assistance” label.</td>
</tr>
<tr>
<td>CheckIn_Duration_Provisional_and_Assistance</td>
<td>Includes check-ins that fall under the “Provisional and Assistance”
label.</td>
</tr>
<tr>
<td>CheckIn_Duration_</td>
<td>Includes check-ins that did not fall under any label, or in other
words, were normal.</td>
</tr>
</tbody>
</table>
<p>As mentioned above, missing information in data is encoded as “NULL”.
This requires us to specify <code>na = "NULL"</code> within the
<code>read_csv()</code> function, allowing R to automatically convert
all the “NULL” entries in the data set into <code>NA</code>.</p>
<p>Below, we will be reading in the Check-In Dataset using the
additional line:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy_data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"messy_data.csv"</span><span class="op">)</span>, na <span class="op">=</span> <span class="st">"NULL"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in here("data", "messy_data.csv"): could not find function "here"</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="tidying-the-data">Tidying the Data<a class="anchor" aria-label="anchor" href="#tidying-the-data"></a>
</h3>
<p>Throughout this next section, we’re going to be tidying/cleaning the
Check-In Data step-by-step to ensure understanding throughout!</p>
<p>We’ll start by looking at the data so we can understand what we’re
working with:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'messy_data' not found</code></pre>
</div>
<p>At first glance, we can see this data set is wide, with each label
tacked onto the end of the phrase “CheckIn_Duration_” and underscores
replacing spaces. Additionally, there is no label after
“CheckIn_Duration_”, which indicates this is likely representative of
the normal check-ins!</p>
<p>However, looking at how many missing values there are, it may be a
better choice to turn the data into “long” data, instead of “wide” data,
with a <code>duration</code> column, and a <code>label</code> column.
Let’s apply this pivot to a new tibble, named <code>clean_data</code>,
below:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">messy_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"duration"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'messy_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<p>Oh no! That’s a lot of <code>NA</code> values. Taking a closer look
at the original data, we can see the first value within the data set
consists of a duration of <code>80</code> underneath the
<code>"CheckIn_Duration_"</code> column. Looking at our in-progress,
“clean” data set, we can see the labels that do not apply to this
duration are listed as <code>NA</code>.</p>
<p>Since the labels that have a duration of <code>NA</code> do not
matter within our data set, we can drop them from the tibble
completely:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<p>Now we’re getting somewhere! Next, when we loaded in the data set, it
was noted that underscores replaced spaces throughout the data. As seen
below, the next step is to revert that change:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#including "all" in the str replace call ensures both underscores are replaced</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<p>Our next step is removing the “CheckIn Duration” phrase from each
label, which we will be completing below:</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">label</span>, <span class="st">"CheckIn Duration "</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<p>After removing the “CheckIn Duration” prefix, we can see that some of
our labels are now an empty strings. However, as you may recall from our
initial analysis of the data, empty labels indicate that the check-in
was normal! So, our next step will be replacing the empty labels with
“Normal” labels:</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="va">clean_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">label</span> <span class="op">==</span> <span class="st">""</span>, <span class="st">"Normal"</span>, <span class="va">label</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data' not found</code></pre>
</div>
<p>Now, our data is clean! In practice, all of these functions can (and
should!) be chained together using pipes (and comments), as seen in the
code block below:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clean_data_final</span> <span class="op">&lt;-</span> <span class="va">messy_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#pivot longer by label</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"duration"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#remove rows with missing values</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#replace underscores with spaces</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#remove "CheckIn Duration " from each label</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">label</span>, <span class="st">"CheckIn Duration "</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#replace empty labels with "Normal"</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">label</span> <span class="op">==</span> <span class="st">""</span>, <span class="st">"Normal"</span>, <span class="va">label</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'messy_data' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">clean_data_final</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data_final' not found</code></pre>
</div>
<p>Since our data has been cleaned, we can now export it as
<code>clean_data.csv</code> for use in future analysis. As you may
recall from “Starting with Data”, we will be using the
<code>write_csv()</code> function, specifying that we want our csv to go
into our data folder:</p>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_csv</span><span class="op">(</span><span class="va">clean_data_final</span>, <span class="st">"data/clean_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'clean_data_final' not found</code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use the <code>tidyr</code> package to change the layout of
tibbles.</li>
<li>Use <code>pivot_wider()</code> to go from long to wide format.</li>
<li>Use <code>pivot_longer()</code> to go from wide to long format.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://engineeringfordemocracy.github.io/data-empowerment/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://engineeringfordemocracy.github.io/data-empowerment/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://engineeringfordemocracy.github.io/data-empowerment/" class="external-link">Source</a></p>
				<p><a href="https://engineeringfordemocracy.github.io/data-empowerment/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:brownsarahm@uri.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/frog-renv-rebuild-1" class="external-link">sandpaper (0.17.2.9000)</a>, <a href="https://github.com/carpentries/pegboard/tree/7dc6acfdd6233c0d124a0ecf288325edc40dd96d" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/main" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://data-empowerment.github.io/NA/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, data empowerment, election workers",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://data-empowerment.github.io/NA/aio.html",
  "identifier": "https://data-empowerment.github.io/NA/aio.html",
  "dateCreated": "2025-02-03",
  "dateModified": "2025-11-14",
  "datePublished": "2025-11-14"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

